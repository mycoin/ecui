(function(){var b=ecui,c=b.ui,a=c.Select.prototype;a.clear=function(){var e=this.getItems()||[],d=e.length;while(d-->0){this.remove(0)}this._uOptions.reset()}})();(function(){var w=ecui,g=w.array,b=w.dom,I=w.ui,p=w.string,k=w.util,n=Date,a=RegExp,f=document,H=g.push,s=b.children,Q=b.create,L=b.getParent,C=b.getPosition,r=b.moveElements,c=b.setText,K=p.formatDate,y=k.getView,m=w.$fastCreate,j=w.inherits,P=w.triggerEvent,d=w.setFocused,i=I.Control,t=i.prototype,e=I.Button,v=e.prototype,B=I.InputControl,x=B.prototype,A=I.Select,R=I.MonthView,l=R.Cell;var z=I.Calendar=j(B,"ui-calendar",function(U,S){var T=this.getTypes()[0];S.hidden=true;U.innerHTML='<span class="'+T+'-text"></span><span class="'+T+'-cancel"></span><span class="'+T+'-button"></span>'},function(W,U){var Y=s(W),V=this.getTypes()[0],X=Q(V+"-panel","position:absolute;display:none");this._bTip=U.tip!==false;if(U.date){var T=U.date.split("-");this._oDate=new n(parseInt(T[0],10),parseInt(T[1],10)-1,parseInt(T[2],10))}else{if(U.date===false){this._oDate=null}else{this._oDate=new n()}}var S=u(U.start,U.end);this._eText=Y[0];this._uCancel=m(this.Cancel,Y[1],this);this._uButton=m(i,Y[2],this);this._bCancelButton=U.cancelButton!==false;if(!this._bCancelButton){this._uCancel.$hide()}f.body.appendChild(X);this._uPanel=m(this.Panel,X,this,{date:this._oDate,range:S})}),D=z.prototype,h=(D.Cancel=j(i)).prototype,G=D.Panel=j(i,"ui-calendar-panel",function(T,ac){var V=[],Y=(new n()).getFullYear(),Z=this.getTypes()[0];var aa=new Date();var X=aa.getFullYear()-5;var ab=aa.getFullYear()+5;var S=ac.range.begin;var W=ac.range.end;if(S){X=S.getFullYear()}if(W){ab=W.getFullYear()}V.push('<div class="'+Z+'-buttons"><div class="'+Z+"-btn-prv"+e.TYPES+'"></div><select class="'+Z+"-slt-year"+A.TYPES+'">');for(var U=X;U<=ab;U++){V.push('<option value="'+U+'">'+U+"</option>")}V.push('</select><select class="'+Z+"-slt-month"+A.TYPES+'">');for(var U=1;U<=12;U++){V.push('<option value="'+U+'">'+(U<10?"0":"")+U+"</option>")}V.push('</select><div class="'+Z+"-btn-nxt"+e.TYPES+'"></div></div>');V.push('<div class="'+Z+"-month-view"+R.TYPES+'"></div>');T.innerHTML=V.join("")},function(T,ab){var Y=[],S,W,Z=this.getTypes()[0],aa=this.Button,X=this.Select,V=this.MonthView,U=ab.date;T=s(T);S=s(T[0]);this._uPrvBtn=m(aa,S[0],this);this._uPrvBtn._nStep=-1;this._uYearSlt=m(X,S[1],this);this._uMonthSlt=m(X,S[2],this);this._uNxtBtn=m(aa,S[3],this);this._uNxtBtn._nStep=1;T=T[1];this._uMonthView=m(V,T,this,{begin:ab.range.begin,end:ab.range.end})}),F=G.prototype,E=(F.Button=j(e,null)).prototype,M=(F.Select=j(A,null)).prototype,N=(F.MonthView=j(R,null)).prototype,O='<span class="ui-calendar-default">请选择一个日期</span>',J="yyyy-MM-dd";function u(W,S){var T=new Date(),V=null,Y=[T.getFullYear(),T.getMonth(),T.getDate()],U,X={y:0,M:1,d:2};if(W instanceof Date){V=V||{};V.begin=W}else{if(/^([-+]?)(\d+)([yMd])$/.test(W)){V=V||{};U=Y.slice();if(!a.$1||a.$1=="+"){U[X[a.$3]]-=parseInt(a.$2,10)}else{U[X[a.$3]]+=parseInt(a.$2,10)}V.begin=new Date(U[0],U[1],U[2])}else{if("[object String]"==Object.prototype.toString.call(W)){V=V||{};W=W.replace(/\//g,"-").split("-");V.begin=new Date(parseInt(W[0],10),parseInt(W[1],10)-1,parseInt(W[2],10))}}}if(S instanceof Date){V=V||{};V.end=S}else{if(/^([-+]?)(\d+)([yMd])$/.test(S)){V=V||{};U=Y.slice();if(!a.$1||a.$1=="+"){U[X[a.$3]]+=parseInt(a.$2,10)}else{U[X[a.$3]]-=parseInt(a.$2,10)}V.end=new Date(U[0],U[1],U[2])}else{if("[object String]"==Object.prototype.toString.call(S)){V=V||{};S=S.split("-");V.end=new Date(parseInt(S[0],10),parseInt(S[1],10)-1,parseInt(S[2],10))}}}return V?V:{}}function q(S){var T=S._eText;if(T.innerHTML==""){S._uCancel.$hide();if(S._bTip){T.innerHTML=O}}else{if(S._bCancelButton){S._uCancel.show()}}}D.getDate=function(){return this._oDate};D.setDate=function(U){var T=this._uPanel,S=U!=null?K(U,J):"";if(this._uPanel.isShow()){this._uPanel.hide()}this._eText.innerHTML=S;x.setValue.call(this,S);this._oDate=U;q(this)};D.setValue=function(S){if(!S){this.setDate(null)}else{S=S.split("-");this.setDate(new Date(parseInt(S[0],10),parseInt(S[1],10)-1,parseInt(S[2],10)))}};D.$activate=function(V){var T=this._uPanel,S,W=C(this.getOuter()),U=W.top+this.getHeight();x.$activate.call(this,V);if(!T.isShow()){T.setDate(this.getDate());S=y();T.show();T.setPosition(W.left+T.getWidth()<=S.right?W.left:S.right-T.getWidth()>0?S.right-T.getWidth():0,U+T.getHeight()<=S.bottom?U:W.top-T.getHeight()>0?W.top-T.getHeight():0);d(T)}};D.$cache=function(S,T){x.$cache.call(this,S,T);this._uButton.cache(false,true);this._uPanel.cache(true,true)};D.init=function(){x.init.call(this);this.setDate(this._oDate);this._uPanel.init()};D.clear=function(){this.setDate(null)};D.setRange=function(T,S){this._uPanel._uMonthView.setRange(T,S)};h.$click=function(){var T=this.getParent(),S=T._uPanel;t.$click.call(this);T.setDate(null)};h.$activate=v.$activate;F.$blur=function(){this.hide()};F.setDate=function(S){var T=S!=null?S.getFullYear():(new Date()).getFullYear(),U=S!=null?S.getMonth()+1:(new Date()).getMonth()+1;this._uMonthView.$setDate(S);this.setView(T,U)};F.setView=function(S,V){var T=this._uMonthSlt,U=this._uYearSlt,W=this._uMonthView;U.setValue(S);T.setValue(V);W.setView(S,V)};F.getViewYear=function(){return this._uMonthView.getYear()};F.getViewMonth=function(){return this._uMonthView.getMonth()};F.$cache=function(S,T){this._uPrvBtn.cache(true,true);this._uNxtBtn.cache(true,true);this._uMonthSlt.cache(true,true);this._uYearSlt.cache(true,true);this._uMonthView.cache(true,true);t.$cache.call(this,S,T)};F.init=function(){t.init.call(this);this._uMonthSlt.init();this._uYearSlt.init();this._uMonthView.init()};F.$change=function(U,S){var T=this.getParent();if(P(T,"change",U,[S])){T.setDate(S)}this.hide()};M.$change=function(){var S=this.getParent(),U=S._uYearSlt,T=S._uMonthSlt;S.setView(U.getValue(),T.getValue())};E.$click=function(){var U=this._nStep,S=this.getParent(),T;T=new n(S.getViewYear(),S.getViewMonth()-1+U,1);S.setView(T.getFullYear(),T.getMonth()+1)};N.$change=function(T,S){P(this.getParent(),"change",T,[S])}})();(function(){var x=ecui,j=x.array,v=x.dom,r=x.ui,b=x.util,f=j.indexOf,c=v.getText,w=v.remove,q=v.create,B=v.setInput,A=b.extend,m=b.inherits,p=x.getKey,u=x.mask,s=x.inherits,g=x.triggerEvent,e=r.InputControl,h=e.prototype,n=r.Items,y=r.Select,l=y.prototype,d=l.Item,C=d.prototype;var z=r.MultiSelect=s(y,"ui-multi-select",function(F,E){E.hide=true;if(E.value){E.value=E.value.toString()}},function(G,F){var E;if(F.maxlength){this._nTextLen=F.maxlength}if(F.textAll){this._sTextAll=F.textAll}if(F.maxSelected){this._nMaxSelected=F.maxSelected}else{if(F.selectAllButton){this.add("全部",0,{selectAllButton:true});this._bSelectAllBtn=true}}if(F.tip){this._bTip=true}if(F.value){this.setValue(F.value)}if(F.selectAll){this._bInitSelectAll=true}if(F.minSelected){this._nMinSelected=F.minSelected}this._eInput.disabled=true}),i=z.prototype,k=i.Item=s(d,"ui-multi-select-item",function(G,E){var F=this.getTypes()[0],H=q(F+"-icon");this._bSelectAllBtn=E.selectAllButton;this._sTip=E.tip?E.tip:c(G);G.insertBefore(H,G.firstChild);G=this._eInput=E.parent.getMain().appendChild(B(null,E.parent.getName(),"checkbox"));E.value===undefined?G.value="":G.value=E.value;G.style.display="none"}),a=k.prototype;function t(I,E){var F=I.getItems();if(!I._bSelectAllBtn){return}if(E===undefined){E=I.getSelected().length===F.length-1;F[0].$setSelected(E)}else{for(var G=0,H;H=F[G];G++){H.$setSelected(E)}}}function D(H){var G;if(H){for(var E=0,F=H.getItems(),J,I=[];J=F[E++];){if(J.isSelected()&&!J._bSelectAllBtn){I.push(J._sTip)}}G='<span title="'+I.join(",")+'">';if(I.length==F.length+(H._bSelectAllBtn?-1:0)&&H._sTextAll){I=H._sTextAll}else{I=I.join(",");if(H._nTextLen&&I.length>H._nTextLen){I=I.substring(0,H._nTextLen)+"..."}}if(H._bTip){I=G+I+"</span>"}H.$getSection("Text").setContent(I)}}A(i,n);a.$click=function(G){var F=this.getParent(),E=F.getSelected().length;C.$click.call(this,G);if(!this.isSelected()){if(!F._nMaxSelected||F._nMaxSelected>=E+1){this.setSelected(true)}}else{if(!F._nMinSelected||F._nMinSelected<=E-1){this.setSelected(false)}}};a.$dispose=function(){this._eInput=null;C.$dispose.call(this)};a.isSelected=function(){return this._eInput.checked};a.$setSelected=function(E){this._eInput.checked=E!==false;this.setClass(this.getPrimary()+(this._eInput.checked?"-selected":""))};a.setSelected=function(E){this.$setSelected(E);t(this.getParent(),this._bSelectAllBtn?E:undefined);D(this.getParent())};i.$alterItems=function(){l.$alterItems.call(this);t(this);D(this)};i.$append=function(E){l.$append.call(this,E);this.getMain().appendChild(B(E._eInput,this.getName()))};i.$cache=l.$cache;i.$intercept=function(E){for(var F=E.getControl();F;F=F.getParent()){if(F instanceof k){E.target=F.getOuter();return false}}this.$getSection("Options").hide();g(this,"change");E.exit()};i.$keydown=i.$keypress=i.$keyup=function(F){h["$"+F.type].call(this,F);if(!this.$getSection("Options").isShow()){return false}var E=p();if(E==13||E==32){if(F.type=="keyup"){E=this.getActived();E.setSelected(!E.isSelected())}return false}};i.$mousewheel=function(F){var E=this.$getSection("Options");if(E.isShow()){E.$mousewheel(F)}return false};i.$deactivate=l.$deactivate;i.$activate=function(F){var E=F.getControl();if(!(E instanceof k)){l.$activate.call(this,F)}};i.$ready=function(){t(this);D(this);if(this._bInitSelectAll){for(var E=0,F=this.getItems(),G;G=F[E++];){!G._bSelectAllBtn&&G.setSelected(true)}}};i.$remove=function(E){l.$remove.call(this,E);this.getMain().removeChild(E._eInput)};i.$setSize=l.$setSize;i.getSelected=function(){for(var F=0,G=this.getItems(),H,E=[];H=G[F++];){if(H.isSelected()&&!H._bSelectAllBtn){E.push(H)}}return E};i.getValue=function(){var F=this.getSelected(),H=[],G,E;for(G=0,E=F.length;G<E;G++){if(!F[G]._bSelectAllBtn){H.push(F[G]._eInput.value)}}return H};i.selectAll=function(){for(var E=0,F=this.getItems(),G;G=F[E++];){!G._bSelectAllBtn&&G.setSelected(true)}};i.isSelectAll=function(){for(var E=0,F=this.getItems(),G;G=F[E++];){if(!G.isSelected()){return false}}return true};i.setOptionSize=l.setOptionSize;i.setValue=function(E){if("[object Array]"!=Object.prototype.toString.call(E)){E=E.toString().split(",")}for(var F=0,G=this.getItems(),H;H=G[F++];){H.setSelected(f(E,H._eInput.value)>=0)}t(this);D(this)}})();(function(){var E=ecui,C=E.dom,a=E.string,m=E.array,y=E.ui,b=E.util,i,v=Math,w=C.create,h=C.children,G=b.extend,q=b.blank,l=E.$fastCreate,z=E.inherits,f=E.triggerEvent,n=y.Control,D=y.Button,F=y.Select,x=y.Item,u=y.Items,A=n.prototype,r=D.prototype,d=x.prototype,s=F.prototype;var p=y.Pager=z(n,"ui-pager",function(M,I){var L=this.getTypes()[0],K,H,J=[];if(!I.showCount||I.showCount<3){H=this._nShowCount=7}else{H=this._nShowCount=I.showCount}this._bOMSButton=I.omsButton!==false;J.push('<div class="'+L+"-button-prv "+L+'-button">上一页</div><div class="'+L+'-items">');for(K=0;K<H;K++){if(K==1||K==H-1){J.push('<div class="'+L+'-item-oms" ecui="disabled:true">...</div>')}J.push('<div class="'+L+'-item"></div>')}J.push('</div><div class="'+L+"-button-nxt "+L+'-button">下一页</div>');M.innerHTML=J.join("")},function(I,H){I=h(I);this._bResizable=false;this._nPage=H.page||1;this._nPageSize=H.pageSize||50;this._nTotal=H.total||0;this._uPrvBtn=l(this.Button,I[0],this);this.$setBody(I[1]);this._uNxtBtn=l(this.Button,I[2],this);this.$initItems()}),g=p.prototype,k=g.Button=z(D,"ui-pager-button",function(J,H){var I=this.getTypes()[0],K=w(I+"-icon");J.insertBefore(K,J.firstChild)}),c=k.prototype,t=(g.Item=z(x,"ui-pager-item",function(I,H){H.resizeable=false})).prototype;G(g,u);function e(K){var J=this.getParent(),I=J._nPage,H=J.getMaxPage(),L=this.getStep();A.$click.call(this);if(L.charAt(0)=="+"){I+=parseInt(L.substring(1),10);if(I==J._nPage){I=H}else{if(I>H){I=J._nPage}}}else{if(L.charAt(0)=="-"){I-=parseInt(L.substring(1),10);if(I==J._nPage){I=1}else{if(I<1){I=J._nPage}}}else{I=parseInt(L,10)}}if(J._nPage!=I){f(J,"change",null,[I])}}function B(I){var N=I._aPageBtn,O=I.getMaxPage(),P=I._nPage,J=I._nShowCount,L=parseInt(J/2,10),H=P-L>0?P-L:1,K,M,Q;if(P==1){I._uPrvBtn.disable()}else{I._uPrvBtn.enable()}if(P==O||O==0){I._uNxtBtn.disable()}else{I._uNxtBtn.enable()}if(H+J-1>O&&O-J>=0){H=O-J+1}for(M=0;Q=N[M];M++){K=H+M;Q.setContent(K);Q.setStep(K);Q.setSelected(P==K);if(K>O){Q.hide()}else{Q.show()}}j(I)}function j(I){var K=I._aPageBtn,J=I._aOMSBtn,H=I.getMaxPage(),L;if(!I._bOMSButton){return}if(K[0].getContent()!="1"){K[0].setContent(1);K[0].setStep(1);J[0].show()}else{J[0].hide()}L=K[K.length-1];if(L.isShow()&&L.getContent()!=H){L.setContent(H);L.setStep(H);J[1].show()}else{J[1].hide()}}t.$setSize=q;t.setSelected=function(H){this.alterClass((H?"+":"-")+"selected")};c.setStep=t.setStep=function(H){this._sStep=H+""};c.getStep=t.getStep=function(){return this._sStep};c.$click=t.$click=e;g.getMaxPage=function(){return v.ceil(this._nTotal/this._nPageSize)};g.getTotal=function(){return this._nTotal};g.getTotal=function(){return this._nTotal};g.go=function(H){this._nPage=H;B(this)};g.setPageSize=function(H){this._nPageSize=H;this._nPage=1;B(this)};g.setTotal=function(H){this._nTotal=H;this._nPage=1;B(this)};g.init=function(){var I,J,H=this.getItems();this._uPrvBtn.setStep("-1");this._uNxtBtn.setStep("+1");this._aOMSBtn=[];this._aPageBtn=[];A.init.call(this);for(I=0;J=H[I];I++){J.init();if(I==1||I==H.length-2){this._aOMSBtn.push(J);J.hide()}else{this._aPageBtn.push(J)}}B(this)};g.$setSize=q})();(function(){var v=ecui,u=v.dom,a=v.string,j=v.array,r=v.ui,c=v.util,h,p=Math,q=u.create,f=u.children,x=c.extend,l=c.blank,i=v.$fastCreate,s=v.inherits,d=v.triggerEvent,k=r.Control,m=r.Pager,w=r.Select,t=k.prototype,e=m.prototype;var g=r.ExtPager=s(k,"ui-ext-pager",function(D,z){var C=this.getTypes()[0],B,y,A=[];if(z.pageOptions){this.PAGE_SIZE=z.pageOptions.split(",")}else{this.PAGE_SIZE=[10,20,50,100]}A.push('<div class="'+C+'-page">共<em></em>页</div>');A.push('<span style="float:left; margin-right:10px">，</span>');A.push('<div class="'+C+'-sum">共<em></em>条记录</div>');A.push('<div class="ui-pager"></div>');A.push('<div class="'+C+'-pagesize">每页显示<select class="ui-select" style="width:45px">');for(B=0,y=this.PAGE_SIZE.length;B<y;B++){A.push('<option value="'+this.PAGE_SIZE[B]+'">'+this.PAGE_SIZE[B]+"</option>")}A.push("</select>条");D.innerHTML=A.join("");z.pageSize=z.pageSize||n;for(B=0,y=this.PAGE_SIZE.length;B<y;B++){if(this.PAGE_SIZE[B]==z.pageSize){break}}},function(z,y){var z=f(z),A=this;this._bResizable=false;this._eTotalPage=z[0].getElementsByTagName("em")[0];this._eTotalNum=z[2].getElementsByTagName("em")[0];this._uPager=i(m,z[3],this,x({},y));this._uPager.$change=function(B){d(A,"change",null,[B,A._uPager._nPageSize])};this._uSelect=i(w,z[4].getElementsByTagName("select")[0],this);this._uSelect.$change=function(){d(A,"pagesizechange",null,[parseInt(this.getValue())])}}),b=g.prototype,n=50;g.PAGE_SIZE=[10,20,50,100];b.init=function(){this._uPager.init();this._uSelect.init();this._eTotalPage.innerHTML=this._nTotalPage||1;this._eTotalNum.innerHTML=this._uPager._nTotal||0;this._uSelect.setValue(this._uPager._nPageSize)};b.onchange=function(z,y){};b.render=function(B,A,y){var z=this._uPager;this._uSelect.setValue(y);if(A||A==0){this._eTotalNum.innerHTML=A;z._nTotal=A}else{this._eTotalPage.innerHTML=z._nPage||0;this._eTotalNum.innerHTML=z._nTotal||0;z._nTotal=z._nTotal||0}z._nPageSize=y||z._nPageSize;this._nTotalPage=p.ceil(A/y);this._eTotalPage.innerHTML=this._nTotalPage;z.go(B)};b.getPageSize=function(){return this._uPager._nPageSize};b.getPage=function(){return this._uPager._nPage};b.getTotal=function(){return this._uPager._nTotal};b.$setSize=l})();(function(){var D=ecui,k=D.array,C=D.dom,t=D.ui,d=D.util,a=D.string,i=D.$fastCreate,p=D.setFocused,r=C.create,g=C.children,m=C.last,E=C.moveElements,F=C.getPosition,B=C.setText,v=D.inherits,b=D.isContentBox,u=D.getStatus,c=d.getView,f=D.triggerEvent,A=a.trim,j=t.Control,y=j.prototype,q=500,n=200,x=D.REPAINT,l=null;var e=t.Tip=v(j,"ui-tip",function(H,G){G.message=A(H.innerHTML)||G.message;H.innerHTML=""},function(H,G){this._sTarget=G.target;this._sMessage=G.message;this._oTimer=null;this._bAsyn=G.asyn===true;this._bLoad=false}),h=e.prototype,z=h.Layer=v(j,"ui-tip-layer",function(H,G){H.appendChild(r(this.getTypes()+"-corner"));H.appendChild(r())},function(H,G){H=g(H);this._eCorner=H[0];this.$setBody(H[1])}),s=z.prototype;function w(){var G;if(!l){G=document.body.appendChild(r(z.TYPES));l=i(z,G);l.cache();l.init()}return l}h.$mouseover=function(){var G=this;y.$mouseover.call(this);clearTimeout(this._oTimer);if(!this._bShow){if(this._bAsyn){var H=w();this.close();G._oTimer=setTimeout(function(){G._bLoad=false;f(G,"loadData",function(){G.open()})},q)}else{this._oTimer=setTimeout(function(){G.open()},q)}}};h.$mouseout=function(){var G=this;y.$mouseout.call(this);clearTimeout(this._oTimer);if(this._bShow){this._oTimer=setTimeout(function(){G.close()},n)}};h.$getTarget=function(G){return document.getElementById(G)};h.setTarget=function(G){this._sTarget=G};h.open=function(){var G=w();if(this._sTarget){var H=this.$getTarget(this._sTarget);if(H){if("[object String]"==Object.prototype.toString.call(H)){G.getBody().innerHTML=H}else{G.getBody().innerHTML=H.innerHTML}}}else{if(this._sMessage){G.setContent(this._sMessage)}}G.show(this);this._bShow=true};h.close=function(){w().hide();this._bShow=false};s.show=function(G){var M=F(G.getOuter()),L=this.getTypes()[0],N=c(),P=13,O=G.getWidth(),J=G.getHeight(),I=9,H=13,K=[];if(G){this._uHost=G}y.show.call(this);this.resize();if(M.left+this.getWidth()>N.right){M.left=M.left+O-this.getWidth()+I;K.push("-right")}else{M.left=M.left-I;K.push("-left")}if(M.top-P-this.getHeight()<N.top&&M.top+J+P+this.getHeight()<N.bottom){M.top+=J+P;K.push("-bottom")}else{M.top-=P+this.getHeight();K.push("-top")}this._eCorner.className=L+"-corner "+L+"-corner"+K.join("");this.setPosition(M.left,M.top)};s.$mouseover=function(){y.$mouseover.call(this);this._uHost.$mouseover()};s.$mouseout=function(){y.$mouseout.call(this);this._uHost.$mouseout()};s.$resize=function(){var H=this._eMain,G=H.style;G.width=this._sWidth;G.height=this._sHeight;this.repaint()}})();(function(){var y=ecui,k=y.array,p=y.ui,k=y.array,w=y.dom,a=y.string,c=y.util,g=y.$fastCreate,h=y.getMouseX,r=y.inherits,m=y.getOptions,q=y.dispose,e=y.triggerEvent,z=c.extend,d=k.indexOf,z=c.extend,u=c.toNumber,f=w.getStyle,i=w.first,v=w.insertAfter,t=a.trim,l=c.blank,j=p.Control,s=j.prototype,b=p.TreeView,A=b.prototype,B=p.DataTree=r(b,"ui-data-tree",function(D,C){C.expandSelected=C.expandSelected===true;if(i(D)&&"divlabel".indexOf(i(D).tagName.toLowerCase())>=0){z(C,m(i(D)))}if(C.value){C.value+=""}C.resizable=false},function(D,C){this._aSelected=[];this._sValue=C.value;this._bHideRoot=C.hideRoot===true;this._bSelectAble=C.selectable!==false;this._bMultiSelect=C.multi===true;this._bAsyn=C.asyn;if(C.asyn&&this._aChildren.length<=0){this.add("Loadding",null);this.collapse();this._bNeedAsyn=true}}),n=B.prototype;function x(C){C.setClass(C.getPrimary()+(C._aChildren.length?C._bCollapsed?"-collapsed":"-expanded":""))}n.init=function(){A.init.call(this);if(this._bHideRoot&&this==this.getRoot()){this.hide();this.expand()}};n.$setParent=function(F){var C=this.getRoot(),E=C._aSelected,G=this.getParent(),D;if((D=d(E,this))>=0){C.$setSelected(this,false)}if(this!==C){remove(G._aChildren,this);x(G)}s.$setParent.call(this,F);if(this._eChildren){v(this._eChildren,this.getOuter())}};n.getValue=function(){return this._sValue};n.getText=function(){return t(this.getContent().replace(/<[^>]+>/g,""))};n.getSelected=function(){if(this==this.getRoot()){return this._aSelected.slice()}};n.getSelectedValues=function(){var D=[],C,E;if(this==this.getRoot()){for(C=0;E=this._aSelected[C];C++){D.push(E.getValue())}return this._bMultiSelect?D:D[0]}};n.setValues=function(C){var E;if(d(C,this._sValue)>=0){this.getRoot().$setSelected(this,true);E=this;while((E=E.getParent())&&E instanceof b){if(E.isCollapsed()){E.expand()}}}for(var D=0,E;E=this._aChildren[D];D++){E.setValues(C)}};n.getItemByValue=function(F){var D=null;if(this._sValue==F){D=this}for(var C=0,E;(E=this._aChildren[C])&&D==null;C++){D=E.getItemByValue(F)}return D};n.load=function(C){var D,E,F;for(D=0;E=this._aChildren[D];D++){q(E)}this._aChildren=[];this._eChildren.innerHTML="";for(D=0;E=C[D];D++){F=E.text;E=z({asyn:this._bAsyn},E);delete E.text;this.add(F,null,E).init()}};n.$expand=function(D){var C=D.getRoot();if(D._bNeedAsyn){e(C,"load",null,[D.getValue(),function(E){D.load(E)}]);D._bNeedAsyn=false}};n.$click=function(D){var C=null;if(D.getControl()==this){s.$click.call(this,D);if(h(this)<=u(f(this.getBody(),"paddingLeft"))){this[D=this.isCollapsed()?"expand":"collapse"]();e(this.getRoot(),D,null,[this])}else{if(d(this.getRoot()._aSelected,this)>=0){if(this._bMultiSelect){C=false}}else{C=true}this.getRoot().setSelected(this);e(this.getRoot(),"select",null,[this,C==true]);if(C!==null){e(this.getRoot(),"change",null,[this.getValue(),C])}}}};n.getSelectedText=function(){var D=[],C,E;if(this==this.getRoot()){for(C=0;E=this._aSelected[C];C++){D.push(E.getText())}return D.join(",")}};n.setSelectAble=function(D){var C=this.getRoot(),E;if(!this.enable&&(E=d(C._aSelected,this))>=0){C.$setSelected(this,false)}this._bSelectAble=D};n.$setSelected=function(F,C){var E,D;if(this==this.getRoot()){E=this._aSelected;D=d(E,F);if(C===true){if(D<0){E.push(F);F.alterClass("+selected")}}else{if(C===false){if(D>=0){E.splice(D,1);F.alterClass("-selected")}}}}};n.clearSelected=function(){var D,C,E;if(this==this.getRoot()){D=this._aSelected;while(E=D[0]){this.$setSelected(E,false)}}};n.setSelected=function(E,F){var D,C;if(this==this.getRoot()&&E._bSelectAble){D=this._aSelected;C=d(D,this);if((C=d(D,E))>=0){if(!F&&this._bMultiSelect){this.$setSelected(E,false)}}else{if(!this._bMultiSelect&&D.length>=1){this.$setSelected(D[0],false)}this.$setSelected(E,true)}if(E&&this._bExpandSelected){E.expand()}}};n.$setSize=l})();(function(){var s=ecui,a=s.string,m=s.ui,b=s.util,a=s.string,e,t=b.extend,h=b.blank,q=b.attachEvent,f=a.encodeHTML,n=s.inherits,c=s.triggerEvent,g=m.Control,p=g.prototype;var u=m.LiteTable=n(g,"ui-lite-table",function(x,w){w.resizable=false},function(x,w){this._aData=[];this._aFields=[];this._eCheckboxAll=null;this._aCheckboxs=[];this._sEmptyText=w.emptyText||"暂无数据";this._bCheckedHighlight=w.checkedHighlight===true}),v=u.prototype,k=["click","mouseup","mousedown"],d={"click th.ui-lite-table-hcell-sort":function(w,z){var y=this.getAttribute("data-field"),x;if(this.className.indexOf("-sort-desc")>=0){x="asc"}else{if(this.className.indexOf("-sort-asc")>=0){x="desc"}else{x=this.getAttribute("data-orderby")||"desc"}}c(z,"sort",null,[y,x])},"click input.ui-lite-table-checkbox-all":function(w,x){x.$refreshCheckbox(this.checked)},"click input.ui-lite-table-checkbox":function(w,x){x.$refreshCheckbox()}};function r(z){var x=[],w,y;for(w=0;y=z[w];w++){x.push(t({},y))}return x}function j(y,z){var w=[],A;y=t({},y);y=t(y,d);for(var x in y){A={handler:y[x]};x=x.split(/\s+/);if(x[0]==z){A.selector=x[1];w.push(A)}}return w}function i(B,w){var y,A,z,x=true;if(!B&&!w){return false}w.replace(/^([^.#]*)([.#]?)(.*)$/,function(D,C,F,E){y=C;z=F;A=E});if(y&&B.tagName.toLowerCase()!=y){x=false}if(z=="."&&!new RegExp("(^|\\s+)"+A+"(\\s+|$)").test(B.className)){x=false}if(z=="#"&&B.id!=A){x=false}return x}function l(A,w,D){var y,F,x,E,z=[],C,B;for(y=0;F=w[y];y++){z.push('<tr class="'+D+'-row">');for(x=0;E=A[x];x++){B=D+"-cell";if(E.align){B+=" "+D+"-cell-align-"+E.align}else{if(E.checkbox){B+=" "+D+"-cell-align-center"}}z.push('<td class="'+B+'">');if(E.checkbox){z.push('<input type="checkbox" value="'+F[E.content]+'" class="'+D+'-checkbox"');if(E.checkedField&&F[E.checkedField]==true){z.push(' checked="checked"')}z.push(" />")}else{if(typeof E.content=="function"){z.push(E.content.call(null,F,y))}else{C=F[E.content];if(!C&&C!=0){C="&nbsp;"}else{C=f(C+"")}z.push(C)}}z.push("</td>")}z.push("</tr>")}return z.join("")}v.$setSize=h;v.init=function(){var w,x,y=this.getOuter(),z=this;p.init.call(this);for(w=0;x=k[w];w++){q(y,x,(function(A){return function(B){var C=B||window.event;C.targetElement=C.target||C.srcElement;z.$fireEventHanlder(A,C)}})(x))}};v.setData=function(x,w,y){this._aData=r(x);if(w){this._sSortby=w.sortby||"";this._sOrderby=w.orderby||""}!y&&this.render()};v.getData=function(){return r(this._aData)};v.getDataByField=function(z,y){var w,x;y=y||"id";for(w=0;x=this._aData[w];w++){if(x[y]==z){return t({},x)}}return null};v.setFields=function(w,x){this._aFields=r(w);!x&&this.render()};v.getSelection=function(){var x=[],w,y;for(w=0;y=this._aCheckboxs[w];w++){y.checked&&x.push(y.value)}return x};v.render=function(){var B=this.getTypes()[0],z=['<table cellpadding="0" cellspacing="0" width="100%" class="'+B+'-table">'],y,C,A,w=this._aFields,x=this._aData;if(!w||w.length<=0){return}z.push('<tr class="'+B+'-head">');for(y=0;C=w[y];y++){A=B+"-hcell";if(C.checkbox){A+=" "+B+"-hcell-checkbox";z.push('<th class="'+A+'"><input type="checkbox" class="'+B+'-checkbox-all" /></th>');continue}z.push("<th");if(C.width){z.push(' width="'+C.width+'"')}if(C.sortable){A+=" "+B+"-hcell-sort";if(C.field&&C.field==this._sSortby){A+=" "+B+"-hcell-sort-"+this._sOrderby}z.push(' data-field="'+C.field+'"');if(C.orderby){z.push(' data-orderby="'+C.orderby+'"')}}z.push(' class="'+A+'">'+C.title+"</th>")}z.push("</tr>");if(!x||x.length<=0){z.push('<tr class="'+B+'-row"><td colspan="'+w.length+'" class="'+B+'-cell-empty">'+this._sEmptyText+"</td></tr>")}else{z.push(l(w,x,B))}z.push("</table>");this.setContent(z.join(""));this.$bindCheckbox();if(this._eCheckboxAll){this.$refreshCheckbox()}};v.$bindCheckbox=function(){var w=this.getBody().getElementsByTagName("input"),x,z,y=this.getTypes()[0];this._aCheckboxs=[];this._eCheckboxAll=null;for(x=0;z=w[x];x++){if(z.type=="checkbox"&&z.className.indexOf(y+"-checkbox-all")>=0){this._eCheckboxAll=z}else{if(z.type=="checkbox"&&z.className.indexOf(y+"-checkbox")>=0){this._aCheckboxs.push(z)}}}};v.$refreshCheckbox=function(z){var x,y,w=true,A;for(x=0;y=this._aCheckboxs[x];x++){A=y.parentNode.parentNode;if(z!==e){y.checked=z}else{w=y.checked&&w}if(y.checked&&this._bCheckedHighlight){A.className+=" highlight"}else{if(this._bCheckedHighlight){A.className=A.className.replace(/\s+highlight/g,"")}}}this._eCheckboxAll.checked=z!==e?z:w};v.$fireEventHanlder=function(A,x){var z=j(this.events,A),y,B,C=x.targetElement,w;for(y=0;B=z[y];y++){if(i(C,B.selector)){B.handler.call(C,x,this)}}};v.$dispose=function(){this._aCheckboxs=[];this._eCheckboxAll=null;p.$dispose.call(this)}})();(function(){var u=ecui,p=u.ui,t=u.dom,a=u.string,i=u.$fastCreate,q=u.inherits,c=u.triggerEvent,m=u.getOptions,g=t.children,n=t.create,s=a.trim,k=p.Control,d=p.PsTip,r=k.prototype,l=p.Radio,j=l.prototype;var b=p.QueryTab=q(k,"ui-query-tab",null,function(y,v){var B=g(y),x=this.getTypes()[0],w,z,A=v.value;this._aItems=[];for(w=0;z=B[w];w++){z.className=s(z.className)+" "+x+"-item"+l.TYPES;this._aItems[w]=i(this.Item,z,this,m(z));if(A&&A==this._aItems[w].getValue()){this._aItems[w].setChecked(true);this._oCurChecked=this._aItems[w]}}}),e=b.prototype,h=e.Item=q(l,"ui-query-tab-item",null,function(w,v){var x;if(v.tip){x=n("ui-tip","","span");w.appendChild(x);this._uTip=i(d,x,this,{target:v.tip})}}),f=h.prototype;f.$click=function(){var v=this.getParent(),w=v._oCurChecked;j.$click.call(this);if(w&&w!=this){v._oCurChecked=this;c(this.getParent(),"change",null,[this.getValue()])}};f.getItems=function(){return this.getParent().getItems()};e.getItems=function(){return this._aItems.slice()};e.getValue=function(){return this._oCurChecked?this._oCurChecked.getValue():null};e.setValue=function(x){for(var v=0,w;w=this._aItems[v];v++){if(w.getValue()==x){w.setChecked(true);this._oCurChecked=w}}}})();(function(){var u=ecui,h=u.array,t=u.dom,p=u.ui,c=u.util,a=u.string,g=u.$fastCreate,m=u.setFocused,n=t.create,e=t.children,w=t.moveElements,y=t.getPosition,q=u.inherits,d=u.triggerEvent,b=c.getView,k=c.blan,i=p.Control,r=i.prototype,s=p.Button,l=s.prototype;var x=p.Pop=q(i,"ui-pop",null,function(C,z){var B=this.getTypes()[0],D=n(),A;C.style.position="absolute";if(z.noButton!==true){D.innerHTML='<div class="'+B+'-buttons"><div class="ui-button ui-button-g">确定</div><div class="ui-button">取消</div></div>';A=e(D.firstChild);this._uSubmitBtn=g(this.Button,A[0],this,{command:"submit",primary:"ui-button-g"});this._uCancelBtn=g(this.Button,A[1],this,{command:"cancel"});w(D,C,true)}}),j=x.prototype;UI_POP_BTN=j.Button=q(s,null,function(A,z){this._sCommand=z.command}),UI_POP_BTN_CLASS=UI_POP_BTN.prototype;j.show=function(B,F){var A=b(),D,z,E=y(B.getOuter());r.show.call(this);this.resize();z=this.getWidth();D=B.getHeight()+E.top;if(!F&&F=="left"){if(E.left+z>A.right){z=E.left+B.getWidth()-z}else{z=E.left}}else{if(E.left+B.getWidth()-z<0){z=E.left}else{z=E.left+B.getWidth()-z}}if(D+this.getHeight()>A.bottom){D=A.bottom-this.getHeight()}var C=y(this.getOuter().offsetParent);z=z-C.left;D=D-C.top;this.setPosition(z,D);m(this)};j.$resize=function(){var A=this._eMain,z=A.style;z.width=this._sWidth;z.height=this._sHeight;this.repaint()};j.init=function(){r.init.call(this);this.$hide()};j.$blur=function(){this.hide();d(this,"cancel")};UI_POP_BTN_CLASS.$click=function(){var z=this.getParent();l.$click.call(this);if(d(z,this._sCommand)){z.$blur=k;z.hide();delete z.$blur}};var f=p.PopButton=q(s,"ui-pop-button",function(B,z){var A=this.getTypes()[0],C=n(A+"-icon","position:absolute");this._sAlign=z.align;B.appendChild(C);this._sTargetId=z.target},function(B,z){var A=this.getTypes()[0];if(z.mode=="text"){this.setClass(A+"-text")}}),v=f.prototype;v.$click=function(){var z;l.$click.call(this);if(this._sTargetId){z=u.get(this._sTargetId);z.show(this,this._sAlign)}}})();(function(){var z=ecui,q=z.ui,x=z.dom,a=z.string,b=z.util,i=z.$fastCreate,t=z.inherits,c=z.triggerEvent,n=z.getOptions,r=z.dispose,h=x.children,p=x.create,B=x.moveElements,w=a.trim,l=a.encodeHTML,m=b.blank,v=b.attachEvent,k=q.Control,u=k.prototype;function e(E){var D=['<div class="'+E+'-title">'],C=(new Date()).getTime();D.push('<input type="radio" name="opt'+C+'" value="def" id="optDef'+C+'" /><label for="optDef'+C+'">默认</label>');D.push('<input type="radio" name="opt'+C+'" value="all" id="optAll'+C+'" /><label for="optAll'+C+'">全部</label>');D.push('<input type="radio" name="opt'+C+'" value="custom" id="optCustom'+C+'" /><label for="optCustom'+C+'">自定义</label>');D.push("</div>");return D.join("")}function g(C,F){for(var D=0,E;E=C[D];D++){v(E,"click",(function(G){return function(){F.$changeType(G)}})(E.value));F._aTypeRadio[E.value]=E}}function A(C,D){v(C,"click",function(){c(D.getParent(),"itemclick")})}function y(F){var D=true,C,E;for(C=0;E=F._aItems[C];C++){if(E.isDefChecked()!=E.isChecked()){D=false;break}}return D}var s=q.CustomCheckboxs=t(k,"ui-custom-checkboxs",function(F,C){var G=p(),E=this.getTypes()[0],D=[e(E)];D.push('<div class="'+E+'-items"></div>');B(F,G,true);F.innerHTML=D.join("");B(G,F.lastChild,true);C.resizeable=false},function(E,D){var F=h(E),C;C=F[0].getElementsByTagName("input");this._aTypeRadio={};g(C,this);this.$setBody(F[1]);this.$initItems(D.data)}),f=s.prototype,d=f.Item=t(k,"ui-custom-checkboxs-item",function(E,C){var D=[];C.name=C.name||w(E.innerHTML);C.resizeable=false;D.push('<input type="checkbox" value="'+C.value+'" id="opt'+C.value+'" />');D.push('<label for="opt'+C.value+'">'+C.name+"</label>");E.innerHTML=D.join("")},function(D,C){this._eInput=h(D)[0];this._sName=C.name;this._sValue=C.value;this._bDefChecked=C.defChecked===true;if(C.checked){this._eInput.checked=true}A(this._eInput,this)}),j=d.prototype;f.$setSize=m;f.init=function(){u.init.call(this);this.$itemclick()};f.$changeType=function(D){var C,E;if(D==this._sValueType){return}this._sValueType=D;if(D=="custom"){return}for(C=0;E=this._aItems[C];C++){if(D=="all"){E.setChecked(true)}else{if(D=="def"){E.setChecked(E.isDefChecked())}}}};f.$initItems=function(C){var F=C||h(this.getBody()),D,E;this._aItems=[];for(D=0;E=F[D];D++){this.add(E)}};f.add=function(E){var D=this.getTypes()[0],C;if(E.nodeName&&E.nodeType==1){E.className=D+"-item";C=n(E)}else{C=E;E=p(D+"-item","","span");this.getBody().appendChild(E)}this._aItems.push(i(this.Item,E,this,C))};f.setData=function(D){var C;if(this._aItems&&this._aItems.length>0){C=this._aItems.length-1;while(C-->=0){r(this._aItems[C])}}this.setContent("");this.$initItems(D);this.$itemclick()};f.getValue=function(){var D,E,C=[];for(D=0;E=this._aItems[D];D++){if(E.isChecked()){C.push(E.getValue())}}return C};f.setValue=function(E){var C,D,F={};for(C=0;D=E[C];C++){F[D]=true}for(C=0;D=this._aItems[C];C++){if(F[D.getValue()]){D.setChecked(true)}else{D.setChecked(false)}}this.$itemclick()};f.setValueType=function(C){this.$changeType(C)};f.getValueType=function(){return this._sValueType};f.$itemclick=function(){var C=this.getValue();if(C.length==this._aItems.length){this._aTypeRadio.all.checked=true;this._sValueType="all"}else{if(y(this)){this._aTypeRadio.def.checked=true;this._sValueType="def"}else{this._aTypeRadio.custom.checked=true;this._sValueType="custom"}}};j.$setSize=m;j.getValue=function(){return this._sValue};j.setChecked=function(C){this._eInput.checked=C};j.isChecked=function(){return this._eInput.checked};j.isDefChecked=function(){return this._bDefChecked}})();(function(){var t=ecui,s=t.dom,a=t.string,l=t.ui,b=t.util,q=b.attachEvent,j=s.create,r=a.trim,i=t.setFocused,h=b.blank,m=t.inherits,f=l.Control,n=f.prototype,c=l.InputControl,d=c.prototype,g=l.Input=m(c,"ui-input",function(w,v){v.resizable=false},function(x,v){var y,w=this.getType();this.getInput().style.border="";if(v.maxLength){this._sMaxLength=v.maxLength}if(v.tip){y=j(w+"-tip","display:none");y.innerHTML=v.tip;this.getBody().appendChild(y);this._eTip=y;q(this._eTip,"mousedown",k)}}),u=g.prototype,p=l.Textarea=m(g,"ui-textarea",function(w,v){v.inputType="textarea"});function k(w){var x=w||window.event,v;if(x.preventDefault){x.preventDefault()}else{x.cancelBuble=true}x=x.target||x.srcElement;v=x.parentNode.getControl();v.getInput().focus()}function e(w,v){if(w._eTip){w._eTip.style.display=v?"":"none"}}u.$keydown=function(){e(this,false)};u.$keyup=function(){var v=this.getValue();if(this._sMaxLength){if(baidu.string.getByteLength(v)>this._sMaxLength){this.setValue(baidu.string.subByte(v,this._sMaxLength))}}if(!v){e(this,true)}};u.$blur=function(){n.$blur.call(this);if(!this.getValue()){e(this,true)}};u.$setSize=h;u.setValue=function(v){d.setValue.call(this,v);e(this,v?false:true)};u.init=function(){if(!this.getValue()){e(this,true)}d.init.call(this)}})();(function(){var b=ecui,f=b.ui,a=b.util,e=RegExp,h=b.triggerEvent,g={},c=[];a.validator={validate:function(m,n){var k=0,l,j=true;while(j&&n[k]){l=n[k++];j=g[l.name].call(null,m,l.rule)}if(!j){j={state:false,name:l.name,rule:l.rule}}else{j={state:true}}return j},addRule:function(j,i){g[j]=i;c.push(j)},collectRules:function(k){var l,j,m=[];for(l=0;j=c[l];l++){if(k.hasOwnProperty(j)){m.push({name:j,rule:k[j]})}}return m}};a.validator.addRule("require",function(i){if("[object Array]"==Object.prototype.toString.call(i)){return i.length!==0}else{i+="";return !!i}});a.validator.addRule("patterMatch",function(i,j){var k=new e(j);return k.test(i)});a.validator.addRule("typeMatch",function(j,k){var i={Url:/^[^.。，]+(\\.[^.，。]+)+$/,Require:/.+/,Email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,Tel:/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/,Mobile:/^0?(13[0-9]|15[0-9]|18[0236789]|14[57])[0-9]{8}$/,Url:/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/,Currency:/^\d+(\.\d+)?$/,Number:/^\d+$/,Zip:/^[1-9]\d{5}$/,Ip:/(\d)\.(\d)\.(\d)\.(\d)/,Integer:/^[-\+]?\d+$/,Double:/^[-\+]?\d+(\.\d+)?$/,English:/^[A-Za-z]+$/,Chinese:/^[\u0391-\uFFE5]+$/,Username:/^[a-z]\w{3,}$/i,Name:/^[\u0391-\uFFE5A-Za-z0-9]+$/};k=i[k];if(k&&k.test(j)){return true}else{return false}});a.validator.addRule("maxLength",function(i,j){return i.length<=j});a.validator.addRule("minLength",function(i,j){return i.length>=j});a.validator.addRule("maxValue",function(i,j){return i<=j});a.validator.addRule("minValue",function(i,j){return i>=j});var d=f.InputControl.prototype;d.validate=function(){var i=true,j;j=a.validator.validate(this.getValue(),this._aValidateRules);i=j.state;if(!i){h(this,"invalid",null,[j.name,j.rule])}return i};d.setValidateRules=function(i){this._aValidateRules=a.validator.collectRules(i)}})();(function(){var c=ecui,k=c.ui,g=c.util,a=c.inherits,l=c.triggerEvent,f=g.blank,j=g.extend,d=k.Control,p=d.prototype,n=k.Items,m=k.InputControl,q=m.prototype;var e=k.Score=a(m,"ui-score",function(v,s){var r=s.max=s.max||5,u=[],t;s.hidden=true;s.value=s.value||0;for(t=1;t<=r;t++){u.push('<span ecui="score:'+t+'"></span>')}v.innerHTML=u.join("")},function(s,r){this._bStatic=(r["static"]===true);this.$initItems()}),i=e.prototype,h=i.Item=a(d,"ui-score-item",function(s,r){r.resizable=false},function(s,r){this._nScore=r.score}),b=h.prototype;j(i,n);i.init=function(){q.init.call(this);this.$score(this.getValue())};i.$score=function(u){var r=this.getItems(),s,t;u=u||this.getValue();for(s=0;t=r[s];s++){t.alterClass(s<u?"+marked":"-marked")}};i.setValue=function(r){q.setValue.call(this,r);this.$score(r)};i.$alterItems=f;b.getScore=function(){return this._nScore};b.$click=function(r){if(!this.getParent()._bStatic){this.getParent().setValue(this.getScore());q.$click.call(this)}};b.$mouseout=function(){if(!this.getParent()._bStatic){this.getParent().$score();p.$mouseout.call(this)}};b.$mouseover=function(){if(!this.getParent()._bStatic){this.getParent().$score(this.getScore());p.$mouseover.call(this)}};b.$setSize=f})();(function(){var w=ecui,c=w.dom,D=w.ui,l=w.string,k=Date,b=RegExp,f=document,s=c.children,K=c.create,G=c.getParent,q=c.moveElements,F=l.formatDate,j=w.$fastCreate,i=w.inherits,I=w.triggerEvent,h=D.Control,t=h.prototype,e=D.Button,v=e.prototype,A=D.InputControl,x=A.prototype,y=D.Calendar,B=y.prototype,g=B.Cancel.prototype,C=B.Panel,H='<span class="ui-calendar-default">请选择一个日期</span>',a='<span class="ui-multi-calendar-default">请选择时间范围</span>',E="yyyy-MM-dd";var d=D.MultiCalendar=i(y,"ui-multi-calendar",function(M,L){L.hidden=true;L.yearRange&&(this._nYearRange=L.yearRange-0);if(L.remind){a='<span class="ui-calendar-default">'+L.remind+"</span>"}},function(N,L){var O=K(),M;O.innerHTML='<input type="hidden" name="'+(L.beginname?L.beginname:"beginDate")+'" /><input type="hidden" name="'+(L.endname?L.endname:"endDate")+'" />';if(L.bdate){M=L.bdate.replace(/\//g,"-").split("-");this._oBegin=new Date(M[0],parseInt(M[1],10)-1,M[2])}if(L.edate){M=L.edate.replace(/\//g,"-").split("-");this._oEnd=new Date(M[0],parseInt(M[1],10)-1,M[2])}M=s(O);this._eBeginInput=M[0];this._eEndInput=M[1];q(O,N,true)});var m=d.prototype;var r=m.Panel=i(h,"ui-multi-calendar-panel",function(){},function(P,M){var O=this.getTypes()[0],N=[],L=M.range||{};this._oRange=L;N.push('<div class="'+O+'-cal-area"><div class="'+O+'-text"><strong>起始时间：</strong><span></span></div><div class="'+C.TYPES+'"></div></div>');N.push('<div class="'+O+'-cal-area"><div class="'+O+'-text"><strong>结束时间：</strong><span></span></div><div class="'+C.TYPES+'"></div></div>');N.push('<div class="'+O+'-buttons"><div class="ui-button-g'+e.TYPES+'">确定</div><div class="'+e.TYPES+'">取消</div></div>');P.innerHTML=N.join("");P=s(P);this._eBeginText=P[0].firstChild.lastChild;this._eEndText=P[1].firstChild.lastChild;this._uBeginCal=j(this.Cal,P[0].lastChild,this,{range:L});this._uBeginCal._sType="begin";this._uEndCal=j(this.Cal,P[1].lastChild,this,{range:L});this._uEndCal._sType="end";this._uSubmitBtn=j(this.Button,P[2].firstChild,this);this._uSubmitBtn._sType="submit";this._uCancelBtn=j(this.Button,P[2].lastChild,this);this._uCancelBtn._sType="cancel"});var z=(m.Cancel=i(B.Cancel)).prototype;var J=r.prototype;var u=(J.Cal=i(C)).prototype;var n=(J.Button=i(e)).prototype;function p(L){var M=L._eText;if(M.innerHTML==""){L._uCancel.hide();if(L._bTip){M.innerHTML=a}}else{L._uCancel.show()}}m.init=function(){x.init.call(this);this.setDate({begin:this._oBegin,end:this._oEnd});this._uPanel.init()};m.setDate=function(M){var O=[],L,N;if(M==null){M={begin:null,end:null}}L=M.begin?F(M.begin,E):"";N=M.end?F(M.end,E):"";this._oBegin=M.begin;this._oEnd=M.end;this._eBeginInput.value=L;this._eEndInput.value=N;this._eInput.value=L+","+N;if(this._oBegin){O.push(L)}if(this._oEnd){O.push(N)}if(O.length==1){O.push(this._oEnd?"之前":"之后");O=O.join("")}else{if(O.length==2){O=O.join("至")}else{O=""}}this._eText.innerHTML=O;p(this)};m.getDate=function(){return{begin:this._oBegin,end:this._oEnd}};z.$click=function(){var L=this.getParent();g.$click.call(this);L.clearRange()};m.clearRange=function(){this._uPanel._oRange.begin=null;this._uPanel._oRange.end=null;this._uPanel._uBeginCal.setRange(null,null);this._uPanel._uEndCal.setRange(null,null)};J.setDate=function(N){var M=this._oRange,O,L;this._oBeginDate=N.begin;this._oEndDate=N.end;if(N.begin){this._eBeginText.innerHTML=F(N.begin,E)}else{this._eBeginText.innerHTML='<span class="ui-multi-calendar-panel-default-text">请选择起始日期</span>'}if(N.end){this._eEndText.innerHTML=F(N.end,E)}else{this._eEndText.innerHTML='<span class="ui-multi-calendar-panel-default-text">请选择结束日期</span>'}L=M.end?M.end:N.end;if(M.end&&N.end&&N.end.getTime()<M.end.getTime()){L=N.end}this._uBeginCal.setRange(M.begin,L,true);this._uBeginCal.setDate(N.begin);O=M.begin?M.begin:N.begin;if(M.begin&&N.begin&&N.begin.getTime()>M.begin.getTime()){O=N.begin}this._uEndCal.setRange(O,M.end,true);this._uEndCal.setDate(N.end)};J.$blur=function(){t.$blur.call(this);this.hide()};J.hide=function(){t.hide.call(this);var M=this.getParent();var L=M.getDate();if(M._nYearRange){if(L.end){this._oRange.begin=new Date(L.end);this._oRange.begin.setFullYear(this._oRange.begin.getFullYear()-M._nYearRange)}if(L.begin){this._oRange.end=new Date(L.begin);this._oRange.end.setFullYear(this._oRange.end.getFullYear()+M._nYearRange)}}};J.init=function(){t.init.call(this);this._uBeginCal.init();this._uEndCal.init()};J.$change=function(){var L=this.getParent(),M=this._oBeginDate,N=this._oEndDate;if(I(L,"change",[M,N])){L.setDate({begin:M,end:N})}this.hide()};J.$setDate=function(L,O){var M=O.charAt(0).toUpperCase()+O.substring(1);var N=this.getParent();this["_e"+M+"Text"].innerHTML=F(L,E);this["_o"+M+"Date"]=L;if(O=="begin"){if(N._nYearRange){this._oRange.end=new Date(L);this._oRange.end.setFullYear(this._oRange.end.getFullYear()+N._nYearRange)}this._uEndCal.setRange(L,this._oRange.end)}else{if(N._nYearRange){this._oRange.begin=new Date(L);this._oRange.begin.setFullYear(this._oRange.begin.getFullYear()-N._nYearRange)}this._uBeginCal.setRange(this._oRange.begin,L)}};u.$blur=function(){t.$blur.call(this)};u.$change=function(N,L){var M=this.getParent();this._oDateSel=L;M.$setDate(L,this._sType)};u.setRange=function(M,L,N){this._uMonthView.setRange(M,L,N)};n.$click=function(){var L=this.getParent();v.$click.call(this);if(this._sType=="submit"){I(L,"change")}else{L.hide()}}})();(function(){var C=ecui,r=C.ui,A=C.dom,a=C.string,b=C.util,i=C.$fastCreate,t=C.inherits,p=C.setFocused,d=C.triggerEvent,E=C.intercept,z=C.restore,w=C.mask,k=A.getParent,F=A.getPosition,g=A.getStyle,e=A.setStyle,x=b.toNumber,m=b.blank,h=document,y=Math.min,j=r.Control,u=j.prototype,c=r.InputControl,f=c.prototype,D=r.Select,n=D.prototype,s=r.DropMenu=t(D,"ui-drop-menu",function(H,G){G.hScroll=G.hScroll===true;G.vScroll=G.vScroll===true;G.optionSize=G.optionSize||50},function(H,G){this._bLabel=G.label===true;this._sText=G.text||"";this._bLabel&&this._uText.setContent(this._sText)}),q=s.prototype;var B=(q.Options=t(j)).prototype;function v(K){var G=K._uOptions,I=G.getOuter(),L=F(K.getOuter()),H=K._cSelected,J=L.top+K.getHeight();if(!k(I)){h.body.appendChild(I);K.cache(false,true);K.$alterItems()}G.clearCache();if(G.isShow()){if(H){p(H)}G.setPosition(L.left+K.getWidth()-G.getWidth()+x(g(I,"borderRightWidth")),J)}}function l(H,G){if(G!==H._cSelected){if(!H._bLabel){H._uText.setContent(G?G.getBody().innerHTML:"")}f.setValue.call(H,G?G._sValue:"");H._cSelected=G;if(H._uOptions.isShow()){p(G)}}}q.$mouseover=function(G){d(this,"activate",G);n.$mouseover.call(this)};q.$mouseout=function(G){this._uOptions.hide();d(this,"deactivate");n.$mouseout.call(this)};q.$activate=function(G){f.$activate.call(this,G);this._uOptions.show();E(this);v(this);G.stopPropagation()};q.$intercept=function(G){this._uOptions.hide();for(var H=G.getControl();H;H=H.getParent()){if(H instanceof this.Item){if(H!=this._cSelected){l(this,H);d(this,"change")}break}}G.exit()};q.$setSize=function(I,G){var H=this._uOptions;n.$setSize.call(this,I,G);e(H.getOuter(),"minWidth",this.getWidth()+10+"px")};B.$hide=function(){u.$hide.call(this);z()};q.$alterItems=m})();(function(){var C=ecui,t=C.ui,A=C.dom,a=C.string,b=C.util,g=C.$fastCreate,w=C.inherits,G=C.findControl,d=C.triggerEvent,n=C.getOptions,h=A.first,m=A.last,f=A.children,r=A.create,B=A.remove,p=A.addClass,s=A.removeClass,e=A.setStyle,z=A.setText,c=A.getText,v=a.getByteLength,l=b.blank,j=t.Control,x=j.prototype;UI_BUTTON=t.Button,UI_BUTTON_CLASS=UI_BUTTON.prototype,UI_INPUT_CONTROL=t.InputControl,UI_INPUT_CONTROL_CLASS=UI_INPUT_CONTROL.prototype,UI_INPUT=t.Input,UI_INPUT_CLASS=UI_INPUT.prototype,UI_SELECT=t.Select,UI_SELECT_CLASS=UI_SELECT.prototype,UI_MULTI_SELECT=t.MultiSelect,UI_MULTI_SELECT_CLASS=UI_MULTI_SELECT.prototype,UI_CALENDAR=t.Calendar,UI_CALENDAR_CLASS=UI_CALENDAR.prototype;var k=t.Condition=w(j,"ui-condition",function(J,H){var I=this.getTypes()[0],K=f(J),L=h(J);p(L,I+"-name");e(J,"display","inline-block");H.clazz=H.clazz||"num";p(K[1],I+"-relation");switch(H.clazz){case"fixed":p(K[2],I+"-fixed-param");break;case"loose":p(K[2],I+"-loose-param");break;case"num":p(K[2],I+"-num-param");break;case"time":p(K[2],I+"-time-param");break;case"date":p(K[2],I+"-date-param");break}if(H.clazz=="fixed"||H.clazz=="loose"){return J}if(H.isPercent){this._bPercent=true;K[4]&&p(K[4],I+"-desc")}else{K[3]&&p(K[3],I+"-desc")}switch(H.clazz){case"num":p(K[4],I+"-num-param");break;case"time":if(H.isPercent){p(K[5],I+"-time-param")}else{p(K[4],I+"-time-param")}break;case"date":p(K[4],I+"-date-param");break}return J},function(L,H){var M=L,L=f(M);var K=this.getTypes()[0];this._sClazz=H.clazz;this._sConId=H.conId;this._eName=L[0];this._sTimeValue=H.timeValue;this._eRelation=g(this.Relation,L[1],this,{optionSize:6,value:0});p(this._eRelation.getOuter(),"ui-select");UI_SELECT_CLASS.$cache.call(this._eRelation,this._eRelation.getOuter().style,true);this._eRelation.$setSize(50,20);d(this._eRelation,"ready");if(H.clazz=="fixed"){var I=n(L[2]);if(H.isMulti){this._eParam=g(this.MultiSelectParam,L[2],this,{selectAllButton:false,value:I.value+""});p(this._eParam.getOuter(),"ui-multi-select");!I.value&&this._eParam.selectAll()}else{this._eParam=g(this.SelectParam,L[2],this,{value:I.value+""})}p(this._eParam.getOuter(),"ui-select");UI_SELECT_CLASS.$cache.call(this._eParam,this._eParam.getOuter().style,true);this._eParam.$setSize(170,20);d(this._eParam,"ready")}else{if(H.clazz=="loose"){this._eParam=g(this.InputParam,L[2],this,{});p(this._eParam.getOuter(),"ui-input");this._eParam.$setSize(370,20)}else{if(H.clazz=="date"){var I=n(L[2]),J=n(L[4]);this._eParam=g(this.CalendarParam,L[2],this,I);this._eDesc=L[3];this._eParamPlus=g(this.CalendarParam,L[4],this,J);p(this._eParam.getOuter(),"ui-calendar");p(this._eParamPlus.getOuter(),"ui-calendar");if(this._eRelation.getValue()!=5){this._eDesc.style.display="none";e(this._eParamPlus.getOuter(),"display","none")}this._eParam.init();this._eParamPlus.init()}else{this._eParam=g(this.InputParam,L[2],this,{});p(this._eParam.getOuter(),"ui-input");if(H.isPercent){this._eDesc=L[4];this._eParamPlus=g(this.InputParam,L[5],this,{});this._ePercentPlus=L[6]}else{this._eDesc=L[3];this._eParamPlus=g(this.InputParam,L[4],this,{})}p(this._eParamPlus.getOuter(),"ui-input");if(this._eRelation.getValue()!=5){this._eDesc.style.display="none";e(this._eParamPlus.getOuter(),"display","none");if(this._ePercentPlus){this._ePercentPlus.style.display="none"}}}}}}),q=k.prototype;var u=(q.Relation=w(UI_SELECT,null)).prototype;var E=(q.MultiSelectParam=w(UI_MULTI_SELECT,null)).prototype;var F=(q.SelectParam=w(UI_SELECT,null)).prototype;var i=(q.InputParam=w(UI_INPUT,null)).prototype;var D=(q.CalendarParam=w(UI_CALENDAR,null)).prototype;q.dispose=function(){this._eRelation.dispose();this._eParam&&this._eParam.dispose();this._eParamPlus&&this._eParamPlus.dispose();x.dispose.call(this)};q.setValue=function(H){if(this._sClazz=="fixed"||this._sClazz=="loose"){this._eParam.setValue(H.value)}this._eRelation.setValue(H[0])};q.$focus=function(){var H,I;this._eParam&&(H=this._eParam.getTypes()[0]+"-error");this._eParamPlus&&(I=this._eParamPlus.getTypes()[0]+"-error");this._eParam&&(s(this._eParam.getOuter(),H));this._eParamPlus&&(s(this._eParamPlus.getOuter(),I))};q.validate=function(){this._sError=this._sErrorPlus=false;var J,H;if(this._sClazz=="fixed"){var J=this._eParam.getValue();if(J&&J.length&&J!="undefined"){return true}else{var I=this._eParam.getTypes()[0];this._sError=true;this._sErrorMsg="请选择";p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}}else{if(this._sClazz=="loose"){if(!this._eParam.getValue()){var I=this._eParam.getTypes()[0];this._sError=true;this._sErrorMsg="请输入必填项内容";p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}else{if(v(this._eParam.getValue())>1000){var I=this._eParam.getTypes()[0];this._sError=true;this._sErrorMsg="输入内容超过500个中文字符，请删减";p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}else{return true}}}else{if(this._sClazz=="num"||this._sClazz=="time"){var I=this._eParam.getTypes()[0];if(this._eRelation.getValue()!=5){J=this._eParam.getValue();if(!J){this._sErrorMsg="请输入必填项内容";this._sError=true;p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}else{if(v(J)>10){this._sErrorMsg="输入内容超过10个数字，请删减";this._sError=true;p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}else{if(!(/^-\d+$|^\d+$/.test(J))||(J-0<0&&!this._bPercent)){this._sErrorMsg="条件逻辑有误，请删减";this._sError=true;p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}else{return true}}}}else{var I=this._eParam.getTypes()[0],K=this._eParamPlus.getTypes()[0];J=this._eParam.getValue();H=this._eParamPlus.getValue();if(!J){this._sErrorMsg="请输入必填项内容";this._sError=true;p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}else{if(v(J)>10){this._sErrorMsg="输入内容超过10个数字，请删减";this._sError=true;p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}else{if(!(/^-\d+$|^\d+$/.test(J))||(J-0<0&&!this._bPercent)){this._sErrorMsg="只能输入数字";this._sError=true;p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}}}if(!H){this._sErrorMsgPlus="请输入必填项内容";this._sErrorPlus=true;p(this._eParamPlus.getOuter(),K+"-error");d(this,"invalidate")}else{if(v(H)>10){this._sErrorMsgPlus="输入内容超过10个数字，请删减";this._sErrorPlus=true;p(this._eParamPlus.getOuter(),K+"-error");d(this,"invalidate");return false}else{if(!(/^-\d+$|^\d+$/.test(H))||(H-0<0&&!this._bPercent)){this._sErrorMsgPlus="只能输入数字";this._sErrorPlus=true;p(this._eParamPlus.getOuter(),K+"-error");d(this,"invalidate");return false}}}if(J&&H&&v(J)<10&&v(H)<10&&/^-\d+$|^\d+$/.test(J)&&/^-\d+$|^\d+$/.test(H)&&J-0<H-0){}else{this._sErrorMsgPlus="条件逻辑有误，请重新输入";this._sErrorPlus=true;p(this._eParamPlus.getOuter(),K+"-error");d(this,"invalidate");return false}return true}}else{if(this._sClazz=="date"){var I=this._eParam.getTypes()[0];if(this._eRelation.getValue()!=5){J=this._eParam.getValue();if(!J){this._sErrorMsg="请输入必填项内容";this._sError=true;p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}else{return true}}else{var K=this._eParamPlus.getTypes()[0];J=this._eParam.getValue();H=this._eParamPlus.getValue();if(!J){this._sErrorMsg="请输入必填项内容";this._sError=true;p(this._eParam.getOuter(),I+"-error");d(this,"invalidate");return false}if(!H){this._sErrorMsgPlus="请输入必填项内容";this._sErrorPlus=true;p(this._eParamPlus.getOuter(),I+"-error");d(this,"invalidate")}if(J&&H&&(this._eParam.getDate().getTime()<=this._eParamPlus.getDate().getTime())){}else{this._sErrorMsgPlus="条件逻辑有误，请重新选择";this._sErrorPlus=true;p(this._eParamPlus.getOuter(),I+"-error");d(this,"invalidate");return false}return true}}}}}};q.getValidateInfo=function(){var H={};this._sErrorMsg&&(H.errorMsg=this._sErrorMsg);this._sErrorMsgPlus&&(H.errorMsgPlus=this._sErrorMsgPlus);this._sError&&(H.error=this._sError);this._sErrorPlus&&(H.errorPlus=this._sErrorMsgPlus);return H};function y(I){var H;switch(Object.prototype.toString.call(I)){case"[object String]":H=I;break;case"[object Number]":H=I+"";break;case"[object Array]":H=I.join(",");break}return H}q.getValue=function(){var I={};var H="";I.id=this._sConId;I.name=c(this._eName);I.pattern=this._eRelation.getValue();switch(this._sClazz){case"fixed":I.type=0;break;case"loose":I.type=1;break;case"num":I.type=2;break;case"time":I.type=3;break;case"date":I.type=4;break}(this._sTimeValue!==undefined)&&(I.timeValue=this._sTimeValue);this._eParam&&(H=y(this._eParam.getValue()));if(this._eRelation.getValue()==5){this._eParamPlus&&(H=H+","+y(this._eParamPlus.getValue()))}I.value=H;return I};u.$change=function(){var H=this.getParent();if(this.getValue()==5){H._eDesc.style.display="inline";H._eParamPlus.show();if(H._ePercentPlus){H._ePercentPlus.style.display="inline"}}else{H._eDesc.style.display="none";H._eParamPlus.hide();if(H._ePercentPlus){H._ePercentPlus.style.display="none"}}};i.$focus=function(){var I=this.getParent(),H=this.getParent();d(H,"focus");UI_INPUT_CLASS.$focus.call(this)}})();(function(){var w=ecui,G=w.ui,c=w.dom,n=w.string,k=w.util,l=w.$fastCreate,j=w.inherits,M=w.triggerEvent,O=w.getOptions,I=w.intercept,L=w.mask,s=c.children,P=c.create,S=c.remove,q=c.moveElements,m=c.first,f=c.next,r=c.last,b=c.getText,e=c.setText,F=c.setStyle,u=c.addClass,J=c.getParent,R=c.insertBefore,D=c.getPosition,y=k.getView,i=G.Control,t=i.prototype,g=G.Button,v=g.prototype,z=G.Select,H=z.prototype,A=G.InputControl,x=A.prototype,p=G.Panel,T=p.prototype;var E=G.IndexTab=j(i,"ui-index-tab",function(X,U){var W=this.getTypes()[0],Y=s(X);o=P();for(var V=0,Z;Z=Y[V++];){u(Z,this.Body.TYPES);u(Z,W+"-body");F(Z,"position","relative")}R(o,s(X)[0])},function(Y,V){var X=this.getTypes()[0],Y=s(Y);this._uLabels=[];for(var W=1,ab;ab=Y[W++];){var aa=P();e(aa,b(S(m(ab))));Y[0].appendChild(aa);u(aa,X+"-label");var U=l(this.Label,aa,this,{});var Z=l(this.Body,ab,this,{hScroll:false});this._uLabels.push(U);U._uBody=Z;T.$cache.call(Z,Z.getOuter().style,true);Z.$setSize(600,240)}this._uLabels[0]&&this._uLabels[0].$setSelected()}),a=E.prototype;var K=(a.Label=j(i)).prototype;var C=(a.Body=j(p,null,function(W,U){var V=this.getTypes()[0],X=P("ui-index-tab-items","","div");q(W,X,true);W.appendChild(X)},function(Y,V){var X=this.getTypes()[0],Z=s(m(m(r(Y))));this._aItems=[];for(var W=0,aa;aa=Z[W++];){u(aa,this.Item.TYPES);var V=O(aa);var U=l(this.Item,aa,this,V)}})).prototype;var d=(C.Item=j(i,"ui-index-tab-body-item",function(Y,W){if(W.clazz==3){var X=this.getTypes()[0],Z=P();e(Z,W.name);var U=P();U.appendChild(Z);var V=P("","","span");e(V,"统计时间段：");U.appendChild(V);U.appendChild(r(Y));Y.appendChild(U)}return Y},function(V,U){this._sClazz=U.clazz||0;this._bIsPercent=U.isPercent===true;this._sId=U.conId||"";this._sPattern=U.pattern||0;this._sValue=U.value||"";this._sSelected=false;this._sName=U.name;this._sText=this._sName;if(U.clazz==3){u(r(V),this.Plus.TYPES);this._uPlus=l(this.Plus,r(V),this,{});S(r(V))}})).prototype;d.$click=function(U){if(this._sClazz!=3){this.$setSelected();return}this._uPlus.$show()};d.$setSelected=function(W,Y){var V=this.getOuter(),U=this.getParent(),X=U.getParent();this._sSelected=true;V=(m(V)?m(V):V);this.alterClass("+selected");!X._sSelected&&(X._sSelected=this);if(X._sSelected&&X._sSelected!=this){X._sSelected.$cancelSelected();X._sSelected=this}if(this._sClazz==3){this._sText=this._sName+"("+Y+")";e(V,this._sText);this._sTimeValue=W}};d.$cancelSelected=function(){var U=this.getOuter();this._sSelected=false;this.alterClass("-selected");if(this._sClazz==3){this._sText=this._sName;e(m(U),this._sText)}};var N=(d.Plus=j(A,"ui-index-tab-body-item-plus",function(W,U){var V=this.getTypes()[0],X=P("","","div");q(W,X,true);W.appendChild(m(X));W.appendChild(X);u(m(W),"clearfix");X=P("","float:left","span");e(X,b(m(W)));e(m(W),"");m(W).appendChild(X);X=P(V+"-img","","span");m(W).appendChild(X);F(W,"position","absolute");F(W,"overFlow","hidden");F(W,"zIndex","32771")},function(W,U){var V=this.getTypes()[0];U=O(r(f(m(W))));u(m(W),V+"-title");u(f(m(W)),V+"-body");u(r(f(m(W))),this.Select.TYPES);this._eInput=r(W);this._uClose=l(this.Close,r(m(W)),this,{});this._uSelect=l(this.Select,r(f(m(W))),this,U);this._uSelect.$cache(this._uSelect.getOuter().style,true);this._uSelect.$setSize(150,20);M(this._uSelect,"ready");F(r(W),"position","absolute")})).prototype;N.$click=function(U){U.stopPropagation()};N.$show=function(){ecui.mask(0.2,32770);var U=this.getOuter(),W=D(this.getParent().getOuter());if(!J(U)){document.body.appendChild(U);this.cache(this.getOuter().style,true)}this.setPosition(W.left,W.top+this.getParent().getHeight());t.$show.call(this);t.$cache.call(this,this.getOuter().style,true);var V=this.getParent();(!V._sSelected)&&(this._uSelect.setValue(""));F(this._eInput,"visibility","hidden")};var B=(N.Close=j(g)).prototype;var h=(N.Select=j(z)).prototype;function Q(W){W&&W.stopPropagation();var Y=this.getParent(),U=Y.getParent(),V=Y._uSelect.getValue(),X=b(Y._uSelect._uText.getOuter());this._sValue=V;U.$setSelected(V,X);Y.$hide();ecui.mask()}B.$click=function(U){U&&U.stopPropagation();var V=this.getParent();V.$hide();ecui.mask()};h.$change=Q;K.$setSelected=function(){var V=this.getParent();for(var U=0,W;W=V._uLabels[U++];){W._uBody.hide();W.alterClass("-selected")}this.alterClass("+selected");this._uBody.show()};K.$click=function(){t.$click.call(this);this.$setSelected()};a.getValue=function(){var V=this._sSelected;if(!V){return null}else{var U={};U.id=V._sId;U.type=V._sClazz;U.isPercent=V._bIsPercent;U.name=V._sText;U.pattern=V._sPattern;(V._sTimeValue!=undefined)&&(U.timeValue=V._sTimeValue);return U}}})();(function(){var s=ecui,r=s.dom,a=s.string,m=s.ui,b=s.util,q=b.attachEvent,e=b.detachEvent,j=b.blank,g=s.$bind,n=s.inherits,d=s.triggerEvent,i=m.Control,p=i.prototype;var c=m.Forms=n(i,"ui-forms",null,function(v,u){this._bResizable=false;this._bAutoSubmit=u.autoSubmit!==false;this._oItems={}}),t=c.prototype;function k(u){return"[object Array]"==Object.prototype.toString.call(u)}function f(u,v){for(var w=0,x;x=u[w];w++){v.call(null,x,w)}}function l(u){var w=[],x,v;for(v=0;x=u[v];v++){if(x.isChecked()){w.push(x.getValue())}}return w.length==1?w[0]:w}function h(v,u){var w,x;if(!k(u)){u=[u]}for(w=0;x=v[w];w++){f(u,function(z,y){if(z==x.getValue()){x.setChecked(true)}else{x.setChecked(false)}})}}t.$setSize=j;t.init=function(){q(this.getMain(),"submit",function(){var u=this.getControl();if(!u._bAutoSubmit){return false}if(!u.validate()){return false}d(u,"submit",null);return false});q(this.getMain(),"reset",function(){var u=this.getControl();d(u,"reset",null);return false})};t.addItem=function(v,u){var w;if(v==""){return}w=this._oItems[v];if(!w){this._oItems[v]=u}else{if("[object Array]"==Object.prototype.toString.call(w)){w.push(u)}else{w=this._oItems[v]=[w];w.push(u)}}};t.getItems=function(){var v=[],u,w;for(u in this._oItems){w=this._oItems[u];if("[object Array]"==Object.prototype.toString.call(w)){v=v.concat(w.slice())}else{v.push(w)}}return v};t.$submit=function(){this.getMain().submit()};t.submit=function(){if(!this.validate()){return}this.$submit()};t.reset=t.$reset=function(){var u=this.getItems(),v,w;for(v=0;w=u[v];v++){w.$reset()}};t.apply=function(){var u=this.getItems(),v,w;for(v=0;w=u[v];v++){w.setDefaultValue()}};t.validate=function(){var w=true,v,x,u=this.getItems();for(v=0;x=u[v];v++){w=x.validate()&&w}if(!w){d(this,"invalid")}return w};t.getValue=function(){var u,w={},v;for(u in this._oItems){v=this._oItems[u];if("[object Array]"==Object.prototype.toString.call(v)){w[u]=l(v)}else{w[u]=v.getValue()}}return w};t.setValue=function(x){var v,w,u=this._oItems;for(v in x){w=u[v];if(!w){continue}if("[object Array]"==Object.prototype.toString.call(w)){h(w,x[v])}else{w.setValue(x[v])}}}})();(function(){var y=ecui,k=y.array,p=y.ui,k=y.array,w=y.dom,a=y.string,c=y.util,g=y.$fastCreate,h=y.getMouseX,r=y.inherits,m=y.getOptions,q=y.dispose,e=y.triggerEvent,z=c.extend,d=k.indexOf,z=c.extend,u=c.toNumber,f=w.getStyle,i=w.first,v=w.insertAfter,t=a.trim,l=c.blank,j=p.Control,s=j.prototype,b=p.TreeView,A=b.prototype,B=p.DataTree=r(b,"ui-data-tree",function(D,C){C.expandSelected=C.expandSelected===true;if(i(D)&&"divlabel".indexOf(i(D).tagName.toLowerCase())>=0){z(C,m(i(D)))}if(C.value){C.value+=""}C.resizable=false},function(D,C){this._aSelected=[];this._sValue=C.value;this._bHideRoot=C.hideRoot===true;this._bSelectAble=C.selectable!==false;this._bMultiSelect=C.multi===true;this._bAsyn=C.asyn;if(C.asyn&&this._aChildren.length<=0){this.add("Loadding",null);this.collapse();this._bNeedAsyn=true}}),n=B.prototype;function x(C){C.setClass(C.getPrimary()+(C._aChildren.length?C._bCollapsed?"-collapsed":"-expanded":""))}n.init=function(){A.init.call(this);if(this._bHideRoot&&this==this.getRoot()){this.hide();this.expand()}};n.$setParent=function(F){var C=this.getRoot(),E=C._aSelected,G=this.getParent(),D;if((D=d(E,this))>=0){C.$setSelected(this,false)}if(this!==C){remove(G._aChildren,this);x(G)}s.$setParent.call(this,F);if(this._eChildren){v(this._eChildren,this.getOuter())}};n.getValue=function(){return this._sValue};n.getText=function(){return t(this.getContent().replace(/<[^>]+>/g,""))};n.getSelected=function(){if(this==this.getRoot()){return this._aSelected.slice()}};n.getSelectedValues=function(){var D=[],C,E;if(this==this.getRoot()){for(C=0;E=this._aSelected[C];C++){D.push(E.getValue())}return this._bMultiSelect?D:D[0]}};n.setValues=function(C){var E;if(d(C,this._sValue)>=0){this.getRoot().$setSelected(this,true);E=this;while((E=E.getParent())&&E instanceof b){if(E.isCollapsed()){E.expand()}}}for(var D=0,E;E=this._aChildren[D];D++){E.setValues(C)}};n.getItemByValue=function(F){var D=null;if(this._sValue==F){D=this}for(var C=0,E;(E=this._aChildren[C])&&D==null;C++){D=E.getItemByValue(F)}return D};n.load=function(C){var D,E,F;for(D=0;E=this._aChildren[D];D++){q(E)}this._aChildren=[];this._eChildren.innerHTML="";for(D=0;E=C[D];D++){F=E.text;E=z({asyn:this._bAsyn},E);delete E.text;this.add(F,null,E).init()}};n.$expand=function(D){var C=D.getRoot();if(D._bNeedAsyn){e(C,"load",null,[D.getValue(),function(E){D.load(E)}]);D._bNeedAsyn=false}};n.$click=function(D){var C=null;if(D.getControl()==this){s.$click.call(this,D);if(h(this)<=u(f(this.getBody(),"paddingLeft"))){this[D=this.isCollapsed()?"expand":"collapse"]();e(this.getRoot(),D,null,[this])}else{if(d(this.getRoot()._aSelected,this)>=0){if(this._bMultiSelect){C=false}}else{C=true}this.getRoot().setSelected(this);e(this.getRoot(),"select",null,[this,C==true]);if(C!==null){e(this.getRoot(),"change",null,[this.getValue(),C])}}}};n.getSelectedText=function(){var D=[],C,E;if(this==this.getRoot()){for(C=0;E=this._aSelected[C];C++){D.push(E.getText())}return D.join(",")}};n.setSelectAble=function(D){var C=this.getRoot(),E;if(!this.enable&&(E=d(C._aSelected,this))>=0){C.$setSelected(this,false)}this._bSelectAble=D};n.$setSelected=function(F,C){var E,D;if(this==this.getRoot()){E=this._aSelected;D=d(E,F);if(C===true){if(D<0){E.push(F);F.alterClass("+selected")}}else{if(C===false){if(D>=0){E.splice(D,1);F.alterClass("-selected")}}}}};n.clearSelected=function(){var D,C,E;if(this==this.getRoot()){D=this._aSelected;while(E=D[0]){this.$setSelected(E,false)}}};n.setSelected=function(E,F){var D,C;if(this==this.getRoot()&&E._bSelectAble){D=this._aSelected;C=d(D,this);if((C=d(D,E))>=0){if(!F&&this._bMultiSelect){this.$setSelected(E,false)}}else{if(!this._bMultiSelect&&D.length>=1){this.$setSelected(D[0],false)}this.$setSelected(E,true)}if(E&&this._bExpandSelected){E.expand()}}};n.$setSize=l})();(function(){var t=ecui,s=t.dom,a=t.string,l=t.ui,b=t.util,q=b.attachEvent,j=s.create,r=a.trim,i=t.setFocused,h=b.blank,m=t.inherits,f=l.Control,n=f.prototype,c=l.InputControl,d=c.prototype,g=l.Input=m(c,"ui-input",function(w,v){v.resizable=false},function(x,v){var y,w=this.getType();this.getInput().style.border="";if(v.maxLength){this._sMaxLength=v.maxLength}if(v.tip){y=j(w+"-tip","display:none");y.innerHTML=v.tip;this.getBody().appendChild(y);this._eTip=y;q(this._eTip,"mousedown",k)}}),u=g.prototype,p=l.Textarea=m(g,"ui-textarea",function(w,v){v.inputType="textarea"});function k(w){var x=w||window.event,v;if(x.preventDefault){x.preventDefault()}else{x.cancelBuble=true}x=x.target||x.srcElement;v=x.parentNode.getControl();v.getInput().focus()}function e(w,v){if(w._eTip){w._eTip.style.display=v?"":"none"}}u.$keydown=function(){e(this,false)};u.$keyup=function(){var v=this.getValue();if(this._sMaxLength){if(baidu.string.getByteLength(v)>this._sMaxLength){this.setValue(baidu.string.subByte(v,this._sMaxLength))}}if(!v){e(this,true)}};u.$blur=function(){n.$blur.call(this);if(!this.getValue()){e(this,true)}};u.$setSize=h;u.setValue=function(v){d.setValue.call(this,v);e(this,v?false:true)};u.init=function(){if(!this.getValue()){e(this,true)}d.init.call(this)}})();(function(){var B=ecui,m=B.array,A=B.dom,u=B.ui,c=B.util,a=B.string,k=B.$fastCreate,s=B.setFocused,v=B.dispose,t=A.create,i=A.children,E=A.moveElements,G=A.getPosition,w=B.inherits,b=c.getView,C=c.extend,n=c.blank,e=B.triggerEvent,l=u.Control,x=l.prototype,z=u.Button,p=z.prototype,d=u.InputControl,h=d.prototype,g=u.InputTree=w(d,"ui-input-tree",function(K,I){var J=this.getTypes()[0],L=t();L.innerHTML='<div class="'+J+'-layer"  style="position:absolute;display:none; z-index:65535; height:230px; width:250px"><div class="'+F.types[0]+'"></div></div>';L=L.firstChild;E(K,L.lastChild,true);I._eLayer=document.body.appendChild(L);K.innerHTML='<span class="'+J+'-text"></span><span class="'+J+'-cancel"></span><span class="'+J+'-button"></span><input type="hidden name="'+I.name+'"" />';I.hidden=true;if(I.value){I.value+=""}},function(J,I){var K;if(I.value){h.setValue.call(this,I.value)}K=i(J);this._eText=K[0];this._uCancel=k(this.Cancel,K[1],this);this._uLayer=k(this.Layer,I._eLayer,this,{asyn:I.asyn});I._eLayer=null;delete I._eLayer;if(I.hideCancel===true){this._bHideCancel=true;this._uCancel.$hide()}}),j=g.prototype,y=j.Layer=w(l,"ui-input-tree-layer",null,function(J,I){J.style.position="absolute";this._uTree=k(this.Tree,J.firstChild,this,{collapsed:true,asyn:I.asyn})}),f=y.prototype,F=u.DataTree,H=(j.Cancel=w(l)).prototype,r=f.Tree=w(F,null,null,function(J,I){this._bAsyn=I.asyn;if(I.asyn&&this._aChildren.length<=0){this.add("Loadding",null);this.collapse();this._bNeedAsyn=true}}),D=r.prototype;function q(I){if(I.getValue()==""){I._uCancel.hide()}else{if(!I._bHideCancel){I._uCancel.show()}}}j.$activate=function(){this._uLayer.show()};j.init=function(){var I=this.getValue();this.setValue(I);this._uLayer.init();h.init.call(this)};j.$setText=function(I){if(I&&I.length>15){I=I.substring(0,15)+"..."}this._eText.innerHTML=I};j.setValue=function(J){var I=this._uLayer._uTree;h.setValue.call(this,J);I.clearSelected();I.setValues([J]);this.$setText(I.getSelectedText());q(this)};j.clear=function(){var I=this._uLayer._uTree;I.clearSelected();h.setValue.call(this,"");this.$setText("");q(this)};j.clearState=function(){var I=this._uLayer._uTree;J(I);function J(K){K.collapse();var M=K.getChildren();if(M&&M.length){for(var L=0;L<M.length;L++){J(M[L])}}}};j.getTreeNodeByValue=function(I){return this._uLayer.getTreeNodeByValue(I)};j.setText=function(I){this.$setText(I)};j.expand=function(J,K){var I=this;this._uLayer.expand(J,function(){K.call(I)})};j.selectParent=function(J){var I=this._uLayer.getTreeNodeByValue(J);if(I!=I.getRoot()){I=I.getParent()}this.setValue(I.getValue())};f.init=function(){this._uTree.init();x.init.call(this)};f.$blur=function(){this.hide()};f.expand=function(K,L){var I=this._uTree,J=I.getItemByValue(K);if(J){J.expand();I.onexpand(J,L)}};f.getTreeNodeByValue=function(I){return this._uTree.getItemByValue(I)};f.show=function(){var J=this.getParent(),L,K,I;x.show.call(this);if(J){L=G(J.getOuter());I=b();K=L.top;L.top=K+J.getHeight();K=L.left;if(K+this.getWidth()>I.right){L.left=K+J.getWidth()-this.getWidth()}else{L.left=K}this.setPosition(L.left,L.top);s(this)}};H.$click=function(){var I=this.getParent();x.$click.call(this);I.$setText("");h.setValue.call(I,"");I._uLayer._uTree.clearSelected();q(I)};H.$activate=p.$activate;D.onselect=function(I,J){var K=this.getParent().getParent();h.setValue.call(K,I.getValue());K.$setText(I.getText());q(K);this.getParent().hide()};D.onexpand=function(M,N){var L=this.getParent().getParent(),N=N||n;var J=L._uLayer.getOuter(),K=J.scrollTop;var I=function(){J.scrollTop=K;J=null};if(M._bNeedAsyn){e(L,"loadtree",null,[M.getValue(),function(O){M.load(O);N.call(null);I()}]);M._bNeedAsyn=false}else{N.call(null);I()}};D.load=function(I){var J,K,L;for(J=0;K=this._aChildren[J];J++){v(K)}this._aChildren=[];this._eChildren.innerHTML="";for(J=0;K=I[J];J++){L=K.text;K=C({asyn:this._bAsyn},K);delete K.text;this.add(L,null,K).init()}if(!I||I.length<=0){this.setClass(this.getPrimary())}}})();(function(){var E=ecui,Q=E.ui,b=E.dom,p=E.string,k=E.util,l=E.$fastCreate,j=E.inherits,z=E.findControl,m=b.first,u=b.last,w=b.children,Y=b.create,ab=b.remove,B=b.addClass,c=b.setText,n=k.blank,i=Q.Control,y=i.prototype,g=Q.Button,D=g.prototype,M=Q.InputControl,G=M.prototype,a=Q.Input,U=a.prototype,J=Q.Select,R=J.prototype,s=Q.MultiSelect,v=s.prototype,H=Q.Calendar,O=H.prototype,e=Q.MultiCalendar,q=e.prototype,aa=Q.DataTree,W=aa.prototype,x=Q.InputTree,V=x.prototype;var P="-1";var N="0";var L="1";var Z="2";var f="3";var r="4";var A="5";var h="6";var F="7";var t="8";var K="9";var X="10";var T=X;var I="^[0-9]*$";var d=".{0,109}";var S=Q.ConditionPlus=j(i,"ui-condition-plus",function(ad,ag){this.parEle=E.dom.getParent(ad);this.theNode=ad;var ak=w(ad);var ah=this.getTypes()[0];var ar=ag.id;var ae=ag.tagName;var al=ag.foreText;var au=ag.isDefault;var an=ag.hide;var am=ag.widgetType;var ac=ag.operatorType;var ax=ag.operatorLeftValue;var aj=d;var av=ag.valueType;var ai=ag.isComplex;var ao=ag.isLike;var aq=ag.attached?ag.attached.split(","):[];var ap=Y(ah+"-text","","span");var at=Y("ui-select","","select");var af="";var aw=Y(ah+"-invalidate","","div");this._sName=ae;this._uId=ar.replace("condition","");this._sIsDefault=au;this._sIsHide=an;this._sName=ae;this._sOperatorType=ac;this._sReg=aj;this._sIsLike=ao;if(E.string.getByteLength(al)>14){E.dom.getParent(ad).style.width="100%";ap.innerHTML=al+"：&nbsp;";E.dom.setStyles(ap,{"float":"left",display:"block","line-height":"22px"})}else{ap.innerHTML=al+"：&nbsp;";E.dom.setStyles(ap,{"float":"left",display:"block","line-height":"22px",width:"103px"})}switch(am+""){case"0":at=Y("ui-select","width:238px;float:left;display:block","select");af="";break;case"1":at=Y("ui-select ui-multi-select","width:238px;float:left;display:block","select");af="";break;case"2":at=Y("ui-input","width:238px;float:left;display:block","input");af="";break;case"3":at=Y("ui-multi-calendar","width:238px;float:left;display:block","div");af="";break;case"4":at=Y("ui-input-tree","width:238px;float:left;display:block","div");af="<div></div>";break;case"6":at=Y("","width:238px;float:left;display:block","div");af="";break;case"5":switch(ae){case"health_grade":at=Y("ui-select ui-multi-select","width:238px;float:left;display:block","div");af="";break;case"trade":case"fc_off_time":case"wm_off_time":case"busi_season":case"province_city":at=Y("","width:238px;float:left;display:block","div");af="";break;case"fc_budget_type":at=Y("ui-select","width:238px;float:left;display:block","div");af="";break}}if(af){at.innerHTML=af}ad.appendChild(ap);ad.appendChild(at);ad.appendChild(aw);E.dom.setStyle(aw,"margin-left",at.offsetLeft+"px")},function(a8,aD){var ai=w(a8);var bh=this.getTypes()[0];var aV=aD.id;var ar=aD.tagName;var a5=aD.foreText;var bc=aD.isDefault;var a3=aD.hide;var aY=aD.widgetType;var ad=aD.operatorType;var aS=aD.operatorLeftValue;var aX=aD.valueType;var aP=aD.isComplex;var a6=baidu.dom.last(a8);this.invalidater=a6;if(bc=="0"&&E.dom.getParent(a8)){E.dom.getParent(a8).style.display="none"}var aj=["select","dropdownlist","input","calendar","inputTree","spec"];this._uType=aj[aY];var av=this;var ae=function(bj){a6.innerHTML=bj};switch(aY+""){case"0":this._uSelect=l(J,ai[1],this,{});R.$cache.call(this._uSelect,this._uSelect.getOuter().style,true);this._uSelect.$setSize(238,20);break;case"1":this._uDropdownList=l(s,ai[1],this,{textAll:"全部状态"});v.$cache.call(this._uDropdownList,this._uDropdownList.getOuter().style,true);this._uDropdownList.$setSize(238,20);this._uDropdownList.setValue([]);break;case"2":var aG=j(a,null);var aZ=aG.prototype;this._uInput=l(aG,ai[1],this,{tip:"",width:"238px"});aZ.$cache.call(this._uInput,this._uInput.getOuter().style,true);this._uInput.$setSize(238,20);this._uInput.setValue("");break;case"3":this._uMultiCalendar=l(e,ai[1],this,{start:"1962-1-1",end:"2032-12-31"});q.$cache.call(this._uMultiCalendar,this._uMultiCalendar.getOuter().style,true);this._uMultiCalendar.$setSize(238,20);this._uMultiCalendar.clear();break;case"4":break;case"6":this._uType="math";var aN=Y("ui-select","","select");var a2=Y("ui-input","","div");var aA=Y("ui-input","margin-left:2px","div");var a7=Y("","","span");a7.innerHTML="&nbsp;-&nbsp;";E.dom.setStyles(aN,{width:"75px"});E.dom.setStyles(a2,{width:"69px","margin-left":"5px","margin-right":"2px"});E.dom.setStyles(aA,{width:"69px","margin-left":"0px"});ai[1].appendChild(aN);ai[1].appendChild(a2);ai[1].appendChild(a7);ai[1].appendChild(aA);au=w(ai[1]);var av=this;var a1=j(J,null);var an=a1.prototype;var ag=j(a,null);var aW=ag.prototype;var at=j(a,null);var ao=at.prototype;this._uMath=l(a1,au[0],this,{});this._uMath.$setSize(72,20);this._uMathLeft=l(ag,au[1],this,{});this._uMathLeft.$setSize(54,20);this._uCenterFlag=a7;this._uMathRight=l(at,au[3],this,{});this._uMathRight.$setSize(54,20);var aw=[{value:P,text:"请选择"},{value:N,text:"等于"},{value:Z,text:"大于"},{value:f,text:"大于等于"},{value:r,text:"小于"},{value:A,text:"小于等于"},{value:h,text:"介于"}];baidu.each(aw,function(bj){av._uMath.add(bj.text,null,bj)});baidu.dom.hide(av._uMathLeft.getOuter());baidu.dom.hide(av._uMathRight.getOuter());av._uMathRight.onfocus=av._uMathLeft.onfocus=function(){E.dom.setStyle(av._uMathLeft.getOuter(),"border","1px solid #A9ADB6");E.dom.setStyle(av._uMathRight.getOuter(),"border","1px solid #A9ADB6");av.invalidater.innerHTML=""};an.$change=function(){baidu.dom.hide(av._uMathLeft.getOuter());baidu.dom.hide(av._uCenterFlag);baidu.dom.hide(av._uMathRight.getOuter());switch(this.getValue()){case N:case Z:case f:case r:case A:baidu.dom.show(av._uMathLeft.getOuter());break;case h:baidu.dom.show(av._uMathLeft.getOuter());baidu.dom.show(av._uCenterFlag);baidu.dom.show(av._uMathRight.getOuter());break}E.dom.setStyle(av._uMathLeft.getOuter(),"border","1px solid #A9ADB6");E.dom.setStyle(av._uMathRight.getOuter(),"border","1px solid #A9ADB6");av.invalidater.innerHTML=""};av._uMath.setSelectedIndex(0);av._uMath.$change();break;case"5":switch(ar){case"fc_budget_type":this._uType="fc_budget_type";this._uSelect=l(J,ai[1],this,{});R.$cache.call(this._uSelect,this._uSelect.getOuter().style,true);this._uSelect.$setSize(238,20);var ba=[{value:P,text:"全部"},{value:0,text:"日预算"},{value:1,text:"周预算"},{value:K,text:"未设置预算"}];baidu.each(ba,function(bj){av._uSelect.add(bj.text,null,bj)});av._uSelect.setSelectedIndex(0);break;case"trade":this._uType="trade";var bi=Y("ui-select","","span");var ap=Y("ui-select","","span");E.dom.setStyles(bi,{width:"114px","margin-left":"0px"});E.dom.setStyles(ap,{width:"113px","margin-left":"7px"});ai[1].appendChild(bi);ai[1].appendChild(ap);var au=w(ai[1]);var av=this;var bf=j(J,null);var aU=bf.prototype;var aK=j(J,null);var aO=aK.prototype;this._uFirstTrade=l(bf,au[0],this,{});this._uFirstTrade.$setSize(110,20);this._uSecTrade=l(aK,au[1],this,{});this._uSecTrade.$setSize(110,20);this._uFirstTrade.$change=function(bk){var bl=av._uFirstTrade.getValue();if(bl==P){av._uSecTrade.clear();av._uSecTrade.add("请选择二级行业",null,{value:P,text:"请选择二级行业"});av._uSecTrade.setSelectedIndex(0)}else{var bj=this.getParent();av._uSecTrade.clear();ecui.triggerEvent(bj,"loaddata",{name:"trade",firstTradeId:bl,secondTradeId:bk},null)}};break;case"province_city":this._uType="province_city";var bb=Y("ui-select","","span");var be=Y("ui-select","","span");E.dom.setStyles(bb,{width:"114px","margin-left":"0px"});E.dom.setStyles(be,{width:"113px","margin-left":"7px"});ai[1].appendChild(bb);ai[1].appendChild(be);var au=w(ai[1]);var av=this;var a0=j(J,null);var aB=a0.prototype;var aM=j(J,null);var aL=aM.prototype;this._uProvince=l(a0,au[0],this,{});this._uProvince.$setSize(114,20);this._uCity=l(aM,au[1],this,{});this._uCity.$setSize(114,20);aB.$change=function(bl){var bk=av._uProvince.getValue();if(bk==0){av._uCity.clear();av._uCity.add("请选择市",null,{value:P});av._uCity.setSelectedIndex(0)}else{var bj=this.getParent();av._uCity.clear();ecui.triggerEvent(bj,"loaddata",{name:"province_city",provinceId:bk,cityId:bl},null)}};break;case"wm_off_time":case"fc_off_time":if(ar=="wm_off_time"){this._uType="wm_off_time"}else{this._uType="fc_off_time"}var av=this;var au=null;var aT=j(J,null);var aF=aT.prototype;var aC=j(J,null);var aq=aC.prototype;var ak=j(J,null);var af=ak.prototype;var ah=Y("ui-select","","select");var bg=Y("ui-select","","select");var ay=Y("","","span");var am=Y("ui-select","","select");ay.innerHTML="&nbsp;-&nbsp;";ai[1].appendChild(ah);ai[1].appendChild(bg);ai[1].appendChild(ay);ai[1].appendChild(am);au=w(ai[1]);E.dom.setStyles(ah,{width:"70px","margin-left":"0px"});E.dom.setStyles(bg,{width:"67px","margin-left":"7px"});E.dom.setStyles(am,{width:"67px","margin-left":"0px"});this._uHitSelect=l(aT,au[0],this,{});this._uHitSelect.$setSize(70,20);this._uHitFirstTimeSelect=l(aC,au[1],this,{});this._uHitFirstTimeSelect.$setSize(69,20);this._uHitCenterFlag=ay;this._uHitSecondTimeSelect=l(ak,au[3],this,{});this._uHitSecondTimeSelect.$setSize(69,20);var aR=[{value:P,text:"全部"},{value:K,text:"未撞线"},{value:T,text:"撞线"}];baidu.each(aR,function(bj){av._uHitSelect.add(bj.text,null,bj)});av._uHitSelect.setSelectedIndex(0);var a9=function(bk,bo){var bm=["请选择","请选择"];var bn=[{value:P,text:bm[bk]}];for(var bl=bo||0;bl<=23;bl++){var bj=(bl+"").length==1?("0"+(bl+"")):(bl+"");bn.push({value:bl*2+1,text:bj+":00"});bn.push({value:bl*2+2,text:bj+":30"})}return bn};var aJ=a9(0);baidu.each(aJ,function(bj){av._uHitFirstTimeSelect.add(bj.text,null,bj)});av._uHitFirstTimeSelect.setSelectedIndex(0);aJ=a9(1);baidu.each(aJ,function(bj){av._uHitSecondTimeSelect.add(bj.text,null,bj)});av._uHitSecondTimeSelect.setSelectedIndex(0);av._uHitSelect.$change=function(){if(av._uHitSelect.getValue()+""==P||av._uHitSelect.getValue()+""==K){baidu.dom.hide(av._uHitFirstTimeSelect.getOuter());baidu.dom.hide(av._uHitCenterFlag);baidu.dom.hide(av._uHitSecondTimeSelect.getOuter())}else{baidu.dom.show(av._uHitFirstTimeSelect.getOuter());baidu.dom.show(av._uHitCenterFlag);baidu.dom.show(av._uHitSecondTimeSelect.getOuter());av._uHitFirstTimeSelect.setSelectedIndex(0);av._uHitSecondTimeSelect.setSelectedIndex(0)}E.dom.setStyle(av._uHitFirstTimeSelect.getOuter(),"border","1px solid #A9ADB6");E.dom.setStyle(av._uHitSecondTimeSelect.getOuter(),"border","1px solid #A9ADB6");av.invalidater.innerHTML=""};av._uHitFirstTimeSelect.onchange=av._uHitSecondTimeSelect.onchange=function(){E.dom.setStyle(av._uHitFirstTimeSelect.getOuter(),"border","1px solid #A9ADB6");E.dom.setStyle(av._uHitSecondTimeSelect.getOuter(),"border","1px solid #A9ADB6");av.invalidater.innerHTML=""};av._uHitSelect.$change();break;case"busi_season":this._uType="busi_season";var av=this;var au=null;var az=j(J,null);var aQ=az.prototype;var aI=j(s,null);var a4=aI.prototype;var al=Y("ui-select","width:70px","select");var aH=Y("ui-select","width:148px;margin-left:7px","select");ai[1].appendChild(al);ai[1].appendChild(aH);au=w(ai[1]);this._uHaveOrNotSelect=l(az,au[0],this,{});this._uHaveOrNotSelect.$setSize(70,20);this._uSeasonMultiSelect=l(aI,au[1],this,{});this._uSeasonMultiSelect.$setSize(150,20);var ac=[{value:P,text:"请选择"},{value:K,text:"无"},{value:X,text:"有"}];var ax=[{value:1,text:"一月"},{value:2,text:"二月"},{value:3,text:"三月"},{value:4,text:"四月"},{value:5,text:"五月"},{value:6,text:"六月"},{value:7,text:"七月"},{text:"八月"},{value:9,text:"九月"},{value:10,text:"十月"},{value:11,text:"十一月"},{value:12,text:"十二月"}];baidu.each(ac,function(bj){av._uHaveOrNotSelect.add(bj.text,null,{value:bj.value})});baidu.each(ax,function(bj){av._uSeasonMultiSelect.add(bj.text,null,{value:bj.value})});av._uHaveOrNotSelect.$change=function(){var bj=av._uHaveOrNotSelect.getValue();if(bj==X){baidu.dom.hide(av._uSeasonMultiSelect.getOuter())}else{baidu.dom.hide(av._uSeasonMultiSelect.getOuter())}};av._uHaveOrNotSelect.setSelectedIndex(0);av._uHaveOrNotSelect.$change();break;case"health_grade":this._uType="health_grade";this._uHealthGrade=l(s,ai[1],this,{textAll:"全部等级"});this._uHealthGrade.$setSize(238,20);var bd=[{grade:1,text:'<span class="healthIcon healthIcon1"></span>',tip:"等级一"},{grade:2,text:'<span class="healthIcon healthIcon2"></span>',tip:"等级二"},{grade:3,text:'<span class="healthIcon healthIcon3"></span>',tip:"等级三"},{grade:4,text:'<span class="healthIcon healthIcon4"></span>',tip:"等级四"},{grade:5,text:'<span class="healthIcon healthIcon5"></span>',tip:"等级五"}];var aE=["1","2","3","4","5"];baidu.each(bd,function(bj){var bl=bj.grade;var bm=bj.text;var bk=bj.tip;av._uHealthGrade.add(bm,null,{value:bl,tip:bk})});av._sDefaultValue=aE;this._uHealthGrade.setValue(aE)}break}}),C=S.prototype;C.clear=function(){var ac=this;switch(this._uType){case"fc_budget_type":ac._uSelect.setSelectedIndex(0);break;case"select":ac._uSelect.setSelectedIndex(0);break;case"dropdownlist":ac._uDropdownList.setValue(ac._sDefaultValue);break;case"health_grade":ac._uHealthGrade.setValue(ac._sDefaultValue);break;case"input":ac._uInput.setValue("");break;case"inputTree":ac._uInputTree.clear();break;case"calendar":ac._uMultiCalendar.clear();break;case"trade":ac._uFirstTrade.setSelectedIndex(0);ac._uSecTrade.clear();baidu.each([{value:P,text:"请选择二级行业"}],function(ad){ac._uSecTrade.add(ad.text,null,{value:ad.value})});ac._uSecTrade.setSelectedIndex(0);break;case"province_city":ac._uProvince.setSelectedIndex(0);ac._uCity.clear();baidu.each([{value:P,text:"请选择市"}],function(ad){ac._uCity.add(ad.text,null,{value:ad.value})});ac._uCity.setSelectedIndex(0);break;case"math":this._uMathLeft.setValue("");this._uMathRight.setValue("");this._uMath.setValue(P);this._uMath.$change();break;case"wm_off_time":case"fc_off_time":ac._uHitSelect.setSelectedIndex(0);ac._uHitFirstTimeSelect.setSelectedIndex(0);ac._uHitSecondTimeSelect.setSelectedIndex(0);ac._uHitSelect.$change();break;case"busi_season":ac._uHaveOrNotSelect.setSelectedIndex(0);ac._uHaveOrNotSelect.$change();ac._uSeasonMultiSelect.setValue([]);break}},C.reset=function(){var ac=this;switch(this._uType){case"fc_budget_type":ac._uSelect.setSelectedIndex(0);break;case"select":ac._uSelect.setSelectedIndex(0);break;case"dropdownlist":if(ac._sDefaultValue){ac._uDropdownList.setValue(ac._sDefaultValue)}else{ac._uDropdownList.setValue([])}break;case"health_grade":if(ac._sDefaultValue){ac._uHealthGrade.setValue(ac._sDefaultValue)}else{ac._uHealthGrade.setValue([])}break;case"input":ac._uInput.setValue("");break;case"inputTree":ac._uInputTree.setValue("");break;case"calendar":ac._uMultiCalendar.clear();break;case"trade":ac._uFirstTrade.setSelectedIndex(0);ac._uSecTrade.clear();baidu.each([{value:P,text:"请选择二级行业"}],function(ad){ac._uSecTrade.add(ad.text,null,{value:ad.value})});ac._uSecTrade.setSelectedIndex(0);break;case"province_city":ac._uProvince.setSelectedIndex(0);ac._uCity.clear();baidu.each([{value:P,text:"请选择市"}],function(ad){ac._uCity.add(ad.text,null,{value:ad.value})});ac._uCity.setSelectedIndex(0);break;case"math":this._uMathLeft.setValue("");this._uMathRight.setValue("");this._uMath.setValue(P);this._uMath.$change();break;case"wm_off_time":case"fc_off_time":ac._uHitSelect.setSelectedIndex(0);ac._uHitSelect.$change();ac._uHitFirstTimeSelect.setSelectedIndex(0);ac._uHitSecondTimeSelect.setSelectedIndex(0);break;case"busi_season":ac._uHaveOrNotSelect.setSelectedIndex(0);ac._uHaveOrNotSelect.$change();ac._uSeasonMultiSelect.setValue([]);break}},C.initValue=function(ae){var ad=this;switch(this._uType){case"select":ae=ae||[];if(ad._sName!="fc_budget_type"){ae=[{value:"-1",text:"请选择"}].concat(ae)}baidu.each(ae,function(af){ad._uSelect.add(af.text,null,{value:af.value})});ad._uSelect.setSelectedIndex(0);break;case"dropdownlist":var ac=[];baidu.each(ae,function(af){var ah=af.text.split("~");if(ah.length==2){var ai=ah[0];var ag=ah[1];ad._uDropdownList.add(decodeURIComponent(ai),null,{value:af.value,tip:ag})}else{ad._uDropdownList.add(decodeURIComponent(af.text),null,{value:af.value})}ac.push(af.value+"")});ad._uDropdownList.setValue(ac);ad._sDefaultValue=ac;break;case"inputTree":this._uInputTree=l(x,ad.theNode.childNodes[1],this,{datasource:ae[0],asyn:true});this._uInputTree.onloadtree=function(ag,af){ad.onloaddata.call(this,ag,af,ad._sName)};this._uInputTree.$setSize(200,20);break;case"trade":ae=[{value:P,text:"请选择一级行业"}].concat(ae);baidu.each(ae,function(af){ad._uFirstTrade.add(af.text,null,{value:af.value})});baidu.each([{value:P,text:"请选择二级行业"}],function(af){ad._uSecTrade.add(af.text,null,{value:af.value})});ad._uFirstTrade.setSelectedIndex(0);ad._uSecTrade.setSelectedIndex(0);break;case"province_city":ae=[{value:P,text:"请选择省"}].concat(ae);baidu.each(ae,function(af){ad._uProvince.add(af.text,null,{value:af.value})});baidu.each([{value:P,text:"请选择市"}],function(af){ad._uCity.add(af.text,null,{value:af.value})});ad._uProvince.setSelectedIndex(0);ad._uCity.setSelectedIndex(0);break}},C.setValue=function(ae,ag,ai){var ah=this;switch(this._uType){case"fc_budget_type":switch(ae+""){case P:ah._uSelect.setValue(P);break;case N:if(ag=="0"||ag=="1"){ah._uSelect.setValue(ag)}else{ah._uSelect.setValue(K)}case K:ah._uSelect.setValue(K);break}break;case"input":ah._uInput.setValue(ag);break;case"select":if(ag===null){ag="-1"}ah._uSelect.setValue(ag);break;case"health_grade":var ad=ag.split(",");ah._uHealthGrade.setValue(ad);break;case"dropdownlist":var ad=ag.split(",");ah._uDropdownList.setValue(ad);break;case"calendar":var ag=ag;var ai=ai;var af={begin:null,end:null};if(ag){af.begin=baidu.date.parse(ag)}if(ai){af.end=baidu.date.parse(ai)}ah._uMultiCalendar.setDate(af);break;case"inputTree":ah._uInputTree.setValue(ag);if(ai){ah._uInputTree.setText(ai)}break;case"math":this._uMath.setValue(ae);this._uMath.$change();this._uMathLeft.setValue(ag);this._uMathRight.setValue(ai);break;case"wm_off_time":case"fc_off_time":ah._uHitSelect.setValue(ae);function ac(ak,al){var aj=parseInt(ak.split(":")[0],10);var am=ak.split(":")[1]=="00"?0:1;al.setValue(2*aj+minut+"")}if(ag){ac(ag,ah._uHitFirstTimeSelect)}if(ai){ac(ai,ah._uHitSecondTimeSelect)}break;case"trade":ag=ag?ag:"-1";ah._uFirstTrade.setValue(ag);ah._uFirstTrade.$change(ai);break;case"province_city":ag=ag?ag:"-1";ah._uProvince.setValue(ag);ah._uProvince.$change(ai);break;case"busi_season":var ad=ag.split(",");ah._uHaveOrNotSelect.setValue(ae);ah._uHaveOrNotSelect.$change();ah._uSeasonMultiSelect.setValue(ad);break}},C.setDefaultValue=function(ac){var af=this;switch(this._uType){case"select":var ae=ac[0];af._sDefaultValue=ae.value;af._uSelect.remove(0);af._uSelect.setValue(ae.value);break;case"inputTree":af._uInputTree.setValue(ac.value+"");break;case"dropdownlist":var ad=[];baidu.each(ac,function(ag){ad.push(ag.value+"")});af._sDefaultValue=ad;af._uDropdownList.setValue(ad);break}},C.getValue=function(){var ag=this;var af={conditionId:ag._uId-0,conditionName:ag._sName,operator:this._sOperatorType||0,firstValue:"",secondValue:""};var ac=baidu.string.trim;switch(ag._uType){case"fc_budget_type":var ah=ag._uSelect.getValue();switch(ah){case P:af.operator=P;break;case"0":af.operator=N;af.firstValue="0";break;case"1":af.operator=N;af.firstValue="1";break;case K:af.operator=K;break}break;case"input":var ad=N;if(this._sIsLike){ad=F}af.operator=ad;af.firstValue=ac(ag._uInput.getValue()+"");break;case"select":af.operator=af.operator||N;if(ag._uSelect.getValue()+""==P){af.firstValue=null}else{af.firstValue=ac(ag._uSelect.getValue()+"")}break;case"dropdownlist":af.operator=t;af.firstValue=ac(ag._uDropdownList.getValue()+"");break;case"health_grade":af.operator=t;af.firstValue=ac(ag._uHealthGrade.getValue()+"");break;case"calendar":var ae=ag._uMultiCalendar.getDate();if(ae.begin&&ae.end){af.operator=h}else{if(ae.begin){af.operator=f}else{if(ae.end){af.operator=A}else{af.operator=N}}}ae.begin&&(af.firstValue=baidu.date.format(ae.begin,"yyyy-MM-dd"));ae.end&&(af.secondValue=baidu.date.format(ae.end,"yyyy-MM-dd"));break;case"inputTree":af.operator=N;af.firstValue=ag._uInputTree.getValue();af.secondValue=ag._uInputTree.getText();break;case"math":af.operator=ag._uMath.getValue();af.firstValue=ac(ag._uMathLeft.getValue()+"");if(af.operator==h){af.secondValue=ac(ag._uMathRight.getValue()+"")}break;case"wm_off_time":case"fc_off_time":af.operator=ag._uHitSelect.getValue()-0;if(ag._uHitFirstTimeSelect.getValue()!="-1"){af.firstValue=ag._uHitFirstTimeSelect.getSelected().getContent()}if(ag._uHitSecondTimeSelect.getValue()!="-1"){af.secondValue=ag._uHitSecondTimeSelect.getSelected().getContent()}break;case"trade":af.operator=N;if(ag._uFirstTrade.getValue()+""==P){af.firstValue=""}else{af.firstValue=ac(ag._uFirstTrade.getValue()+"")}if(ag._uSecTrade.getValue()+""==P){af.secondValue=""}else{af.secondValue=ac(ag._uSecTrade.getValue()+"")}break;case"province_city":af.operator=N;if(ag._uProvince.getValue()+""==P){af.firstValue=""}else{af.firstValue=ac(ag._uProvince.getValue()+"")}if(ag._uCity.getValue()+""==P){af.secondValue=""}else{af.secondValue=ac(ag._uCity.getValue()+"")}break;case"busi_season":af.operator=ac(ag._uHaveOrNotSelect.getValue()+"")-0;if(af.operator==X){af.firstValue=ac(ag._uSeasonMultiSelect.getValue()+"")}else{af.firstValue=""}break}return af},C.show=function(){baidu.dom.show(this.parEle)},C.hide=function(){baidu.dom.hide(this.parEle)},C.getUsable=function(){return this.parEle.style.display=="none"?false:true},C.getType=function(){return this._uType},C.isDefault=function(){return this._sIsDefault},C.isValidate=function(){var ae=this;var ad=false;var ag=function(ah,ai){if(ah==h){E.dom.setStyle(ae._uMathLeft.getOuter(),"border","solid 1px red");E.dom.setStyle(ae._uMathRight.getOuter(),"border","solid 1px red")}else{if(ah==P){E.dom.setStyle(ae._uMathLeft.getOuter(),"border","1px solid #A9ADB6");E.dom.setStyle(ae._uMathRight.getOuter(),"border","1px solid #A9ADB6")}else{E.dom.setStyle(ae._uMathLeft.getOuter(),"border","solid 1px red");E.dom.setStyle(ae._uMathRight.getOuter(),"border","1px solid #A9ADB6")}}if(!ai){E.dom.setStyle(ae._uMathLeft.getOuter(),"border","1px solid #A9ADB6");E.dom.setStyle(ae._uMathRight.getOuter(),"border","1px solid #A9ADB6")}ae.invalidater.innerHTML=ai};if(this._uType=="math"){if(ae._uMath.getValue()==h){var af=ae._uMathLeft.getValue()&&parseInt(ae._uMathLeft.getValue());var ac=ae._uMathRight.getValue()&&parseInt(ae._uMathRight.getValue());if(isNaN(af)||isNaN(ac)){ad=true;ag(h,"请正确填写查询范围")}else{if(af&&ac&&(af>ac)){ad=true;ag(h,"请正确填写查询范围")}else{ad=false;ag(h,"")}}}else{if(ae._uMath.getValue()==P){ag(P,"");ad=false}else{var af=ae._uMathLeft.getValue();if(isNaN(af)){ad=true;ag(ae._uMath.getValue(),"数值不合法，请重新输入")}}}}if(this._uType=="wm_off_time"||this._uType=="fc_off_time"){if(ae._uHitFirstTimeSelect.getValue()!="-1"&&ae._uHitSecondTimeSelect.getValue()!="-1"&&parseInt(ae._uHitFirstTimeSelect.getValue(),10)>parseInt(ae._uHitSecondTimeSelect.getValue(),10)){E.dom.setStyle(ae._uHitFirstTimeSelect.getOuter(),"border","solid 1px red");E.dom.setStyle(ae._uHitSecondTimeSelect.getOuter(),"border","solid 1px red");ae.invalidater.innerHTML="请选择填写查询范围";ad=true}}return ad}})();(function(){var I=ecui,b=I.dom,e=I.array,O=I.ui,p=I.string,j=I.util,k=I.$fastCreate,i=I.inherits,T=I.triggerEvent,Q=I.dispose,R=I.$dispose,U=b.create,m=b.first,x=b.last,y=b.children,G=b.addClass,N=b.setStyle,c=b.setText,a=b.getText,u=b.removeClass,S=b.getParent,w=b.moveElements,M=b.getAttribute,L=b.getPosition,P=I.string.encodeHTML,H=e.remove,J=j.getView,n=j.extend,r=I.repaint,d=j.attachEvent,v=j.detachEvent,W=Math,D=W.min,B=window,h=O.Control,A=h.prototype,C=O.Table,g=C.prototype,q=O.LockedTable,t=q.prototype;var Y=O.CustomTable=i(q,"ui-table",function(ac,al){this._oOptions=al;this._aHeader=al.header;this._sSortby=al.sortby;this._sOrderby=al.orderby;if(!al.datasource){this._nLeftLock=al.leftLock||0;this._nRightLock=al.rightLock||0}var aj=this.getTypes()[0];var af=[];af.push("<table><thead>");al.leftLock=al.leftLock||0;al.rightLock=al.rightLock||0;var Z=al.leftLock+al.rightLock;if(!al.datasource){N(ac,"width","100%")}else{N(ac,"width","auto");N(ac,"display","block")}if(!al.datasource){af.push("<tr>");var ae;for(var ae=0;ae<=Z;ae++){af.push("<th></th>")}af.push("</tr>")}else{if("[object Array]"==Object.prototype.toString.call(al.fields[0])){var ai=0;var ae;for(ae=0;ae<al.fields.length;ae++){var ab=al.fields[ae];af.push(l(ab,this,al.fields))}this._aColumns=[];for(var ae=0,ab;ab=al.fields[0][ae];ae++){if(ab.colspan){for(var ad=0;ad<ab.colspan;ad++){this._aColumns.push(n({},al.fields[1][ai++]))}}else{this._aColumns.push(n({},ab))}}}else{af.push(l(al.fields,this));this._aColumns=F(al.fields)}}af.push("</thead><tbody>");if(!al.datasource){af.push("<tr>");var ae;af.push("<td></td>");af.push("</tr>");al.leftLock=0;al.rightLock=0}else{this._aData=al.datasource;if(!this._aData.length){af.push("<tr>");af.push('<td class="'+aj+'-empty-cell" align="middle" colspan="'+this._aColumns.length+'">');af.push(al.errorMsg?al.errorMsg:"暂无数据，请稍后再试");af.push("</td>");af.push("</tr>")}else{var ae;for(ae=0;ae<al.datasource.length;ae++){var ak=al.datasource[ae];af.push("<tr>");var ad;for(ad=0;ad<this._aColumns.length;ad++){var ab=this._aColumns[ad];af.push("<td");af.push(' width="'+ab.width+'"');af.push(' style="width:'+ab.width+"px;min-width:"+ab.width+"px;max-width:"+ab.width+'px;"');if(al.autoEllipsis){af.push(' class="'+aj+'-cell-ellipsis"')}ab.align&&af.push(' align="'+ab.align+'"');af.push(">");var ah=ab.content||ab.field;if(typeof ah=="function"){var ag=ah.call(null,ak,ae);if(Object.prototype.toString.call(ag)=="[object String]"){if(al.autoEllipsis){af.push('<div style="overflow:hidden; text-overflow:ellipsis;width:'+ab.width+"px;max-width:"+ab.width+"px;min-width:"+ab.width+'px;" title="'+ag+'">'+ag+"</div>")}else{if(ab.maxlength&&ag&&ag.length>ab.maxlength){af.push('<span class="');af.push(aj+'-cell-limited"');af.push(' title="'+ag+'">');af.push(P(ag.substring(0,ab.maxlength)));af.push("...");af.push("</span>")}else{af.push(ag)}}}else{var aa=U();aa.appendChild(ag);af.push(aa.innerHTML)}}else{if(ab.checkbox){af.push('<input type="checkbox"');af.push(' class="'+aj+'-checkbox"');af.push(' data-rownum="'+ae+'"');af.push(" />")}else{if(ab.score){af.push('<span ecui="type:score; static:true; max:');af.push(ab.max+"; value:"+ak[ah]);af.push('"></span>')}else{af.push(p.format(ab.content,ak)||'<div class="ui-table-empty-cell">-</div>')}}if(ab.detail){af.push('<span style="margin-left:3px;" ecui="type:tip;asyn:true;id:');af.push("tip-"+ak[ab.idField]+'"');af.push("></span>")}}af.push("</td>")}af.push("</tr>")}}}af.push("</tbody></table>");ac.innerHTML=af.join("");return ac},function(aa,Z){ecui.init(aa);if(Z.fields&&Z.datasource){s(Z.fields,Z.datasource)}this.$bindCheckbox();return aa}),K=Y.prototype,z=["click","mouseup","mousedown"],X={"click th.ui-table-hcell-sort":function(Z,ac){var ab=this.getAttribute("data-field"),aa;if(this.className.indexOf("-sort-desc")>=0){aa="asc"}else{if(this.className.indexOf("-sort-asc")>=0){aa="desc"}else{aa=this.getAttribute("data-orderby")||"desc"}}T(ac,"sort",null,[ab,aa])},"click input.ui-table-checkbox-all":function(Z,aa){aa.$refreshCheckbox(this.checked)},"click input.ui-table-checkbox":function(Z,aa){aa.$refreshCheckbox()}};function l(ai,aa,ah){var ag=aa.getTypes()[0];var ae=[];ae.push("<tr>");var af=0;var ad=0;for(ad=0;ad<ai.length;ad++){var ab=ai[ad];ae.push("<th ");ae.push('data-field="');if(Object.prototype.toString.call(ab.field)=="[object String]"){ae.push(ab.field)}if(ab.width){ae.push('" style="width:'+ab.width+"px;min-width:"+ab.width+"px;max-width:"+ab.width+"px;")}if(ab.rowspan){ae.push('" rowspan="'+ab.rowspan)}if(ab.colspan){ae.push('" colspan="'+ab.colspan);var ac;var Z=0;for(ac=af;ac<af+ab.colspan;ac++){Z+=ah[1][ac].width}ae.push('" width="'+Z);af+=ab.colspan}if(ab.sortable){ae.push('" class="'+ag+"-hcell-sort");if(ab.field&&ab.field==aa._sSortby){ae.push(" "+ag+"-hcell-sort-"+aa._sOrderby)}if(ab.order){ae.push('" data-orderby="'+ab.order.toLowerCase())}}ae.push('">');if(ab.name){ae.push(ab.name)}if(ab.checkbox){ae.push('<input type="checkbox" class="'+ag+'-checkbox-all" />')}if(ab.tip&&ab.tip.length){ae.push('<span ecui="type:tip; id:tip-');ae.push(ab.field);ae.push("; message:");ae.push(ab.tip);ae.push('"></span>')}ae.push("</th>")}ae.push("</tr>");return ae.join("")}function s(af,Z){var ab=0;for(ab=0;ab<Z.length;ab++){var ac=Z[ab];for(var aa=0;aa<af.length;aa++){var ae=af[aa];if(ae.detail){var ad="tip-"+ac[ae.idField];if(ecui.get(ad)){ecui.get(ad).onloadData=(function(ag,ah){return function(ai){ah.loadData(ag,ai)}})(ac,ae)}}}}}K.getData=function(){return this._aData};K.render=function(ae,Z,af,ak,ad){var ak=n({},ak);ak=n(ak,this._oOptions);ak.leftLock=this._nLeftLock;ak.rightLock=this._nRightLock;ak.fields=ae;ak.datasource=Z||[];var af=af||{};ak.sortby=af.sortby;ak.orderby=af.orderby;ak.errorMsg=ad;if(!Z.length){ak.leftLock=0;ak.rightLock=0}v(B,"resize",r);if(!ak.complex){var ag;var aj;var ac;aj=this._aHeadRows.concat(this._aRows,this._aLockedRow,this._aLockedHeadRow);var ai;for(ac=0;ai=aj[ac];ac++){var ab;if(ai._aElements){var ah=ai.getCells();for(ab=0;cell=ah[ab];ab++){R(cell)}R(ai,true)}}}for(ac=0;ag=this._aHCells[ac];ac++){R(ag,true)}for(ag in this){if(/_u\w+/.test(ag)){Q(this[ag])}}var aa=this.getOuter();I.dom.empty(aa);this.$setBody(aa);this.$resize();Y.client.call(this,aa,ak);this._bCreated=false;this.cache(true,true);t.init.call(this);d(B,"resize",r);this.resize()};K.disposeUnit=function(ad){v(B,"resize",r);var aa;var ab;ab=this._aHeadRows.concat(this._aRows,this._aLockedRow,this._aLockedHeadRow);var Z=0;var ac=function(){var ag=ab[Z];if(ag){var af;if(ag._aElements){var ae=ag.getCells();for(af=0;cell=ae[af];af++){R(cell)}R(ag,true)}Z++;setTimeout(ac,0)}else{ad()}};ac();d(B,"resize",r)};K.$bindCheckbox=function(){var Z=this.getBody().getElementsByTagName("input"),aa,ac,ab=this.getTypes()[0];this._aCheckboxs=[];this._eCheckboxAll=null;for(aa=0;ac=Z[aa];aa++){if(ac.type=="checkbox"&&ac.className.indexOf(ab+"-checkbox-all")>=0){this._eCheckboxAll=ac}else{if(ac.type=="checkbox"&&ac.className.indexOf(ab+"-checkbox")>=0){this._aCheckboxs.push(ac)}}}};K.$refreshCheckbox=function(ac){var aa,ab,Z=true,ad;for(aa=0;ab=this._aCheckboxs[aa];aa++){ad=ab.parentNode.parentNode;if(ac!==undefined){ab.checked=ac}else{Z=ab.checked&&Z}if(ab.checked&&this._bCheckedHighlight){ad.className+=" highlight"}else{if(this._bCheckedHighlight){ad.className=ad.className.replace(/\s+highlight/g,"")}}}if(this._eCheckboxAll){this._eCheckboxAll.checked=ac!==undefined?ac:Z}};K.$ready=function(){T(this,"sizechange")};K.$resize=function(){var Z=this;t.$resize.call(this);setTimeout(function(){T(Z,"sizechange");Z.$pagescroll()},100)};K.$pagescroll=function(){t.$pagescroll.call(this);if(this._uHScrollbar){f(this)}};K.getSelection=function(){if(!this._aCheckboxs||!this._aCheckboxs.length){return[]}var ab=[];for(var aa=0,ac;ac=this._aCheckboxs[aa++];){if(ac.checked){var Z=M(ac,"data-rownum")-0;ab.push(n({},this._aData[Z]))}}return ab};K.init=function(){var Z,aa,ab=this.getOuter(),ac=this;t.init.call(this);for(Z=0;aa=z[Z];Z++){d(ab,aa,(function(ad){return function(ae){var af=ae||window.event;af.targetElement=af.target||af.srcElement;ac.$fireEventHandler(ad,af)}})(aa))}};K.$fireEventHandler=function(ad,aa){var ac=V(this.events,ad),ab,ae,af=aa.targetElement,Z;for(ab=0;ae=ac[ab];ab++){if(E(af,ae.selector)){ae.handler.call(af,aa,this)}}};K.$refresh=function(ac,aa){var Z=[],ad=[];G(ac,this.getTypes()[0]);Z=this._aHCells;ad=this._aRows.concat(this._aHeadRows,this._aLockedRow,this._aLockedHeadRow);for(var ab=0,ae;ae=Z[ab++];){Q(ae)}for(var ab=0,ae;ae=ad[ab++];){Q(ae)}t.$refresh.call(this,ac,aa)};K.qaTest=function(){var Z=this;return{table:Z}};K.qaTest.getRowsCount=function(){var Z=this.table.getData();if(Z&&Z.length){return Z.length}else{return 0}};K.qaTest.getRowsContent=function(){var Z=this.table.getData()||null;return Z};function f(Z){var aa;aa=Z._eBrowser?Z._eBrowser:Z._uHScrollbar.getOuter();aa.style.top=D(J().bottom-L(Z.getOuter()).top-aa.offsetHeight,Z.getHeight()-aa.offsetHeight)+"px";N(aa,"zIndex",1)}function V(ab,ac){var Z=[],ad;ab=n({},ab);ab=n(ab,X);for(var aa in ab){ad={handler:ab[aa]};aa=aa.split(/\s+/);if(aa[0]==ac){ad.selector=aa[1];Z.push(ad)}}return Z}function E(ae,Z){var ab,ad,ac,aa=true;if(!ae&&!Z){return false}Z.replace(/^([^.#]*)([.#]?)(.*)$/,function(ag,af,ai,ah){ab=af;ac=ai;ad=ah});if(ab&&ae.tagName.toLowerCase()!=ab){aa=false}if(ac=="."&&!new RegExp("(^|\\s+)"+ad+"(\\s+|$)").test(ae.className)){aa=false}if(ac=="#"&&ae.id!=ad){aa=false}return aa}function F(ab){var aa=[];for(var Z=0,ac;ac=ab[Z++];){aa.push(n({},ac))}return aa}})();(function(){var d=ecui,m=d.ui,g=d.dom,j=d.string,i=d.util,c=d.$fastcreate,h=d.$connect,a=d.inherits,n=d.triggerEvent,l=j.encodeHTML,f=m.Control,p=f.prototype,q=m.Select,e=q.prototype,b=m.CascadeSelect=a(q,null,function(s,r){},function(s,r){this._bTarget=r.target;h(this,function(t){this._cTarget=t},this._bTarget)}),k=b.prototype;k.$change=function(){e.$click.call(this);var r=this._cTarget;n(r,"loaddata",function(s,u){var v=r;v.clear();for(var t=0,w;w=s[t];t++){v.add(w.text,null,{value:w.value})}v.setValue(u)})}})();(function(){var p=ecui,j=p.ui,m=p.dom,a=p.string,g=p.array,b=p.util,d=p.repaint,k=p.dispose,r=window,q=b.extend,l=b.attachEvent,f=b.detachEvent,c=p.triggerEvent,n=m.remove,s=m.moveElements,h=m.getParent,i=m.addClass,e=m.insertBefore;UI_CONTROL=j.Control,UI_CONTROL_CLASS=UI_CONTROL.prototype,UI_INPUT_CONTROL=j.InputControl,UI_INPUT_CONTROL_CLASS=UI_INPUT_CONTROL.prototype,UI_ITEMS=j.Items,UI_SELECT=j.Select,UI_SELECT_CLASS=UI_SELECT.prototype,UI_MULTI_SELECT=j.MultiSelect,UI_MULTI_SELECT_CLASS=UI_MULTI_SELECT.prototype;UI_CONTROL_CLASS.$refresh=function(w,t){var v=this.getTypes()[0];var u;this._bResizable&&f(r,"resize",d);for(u in this){if(this[u] instanceof UI_CONTROL){k(this[u])}}e(w,this.getOuter());n(this.getOuter());this.$setBody(w);t.uid=this.getUID();t.primary=v;i(w,v);this.constructor.agent.client.call(this,this.getOuter(),t);this._bCreated=false;this.cache(true,true);this.init();this._bResizable&&l(r,"resize",d);if(this._bResizable){this.resize();c(this,"sizechange")}};UI_SELECT_CLASS.$refresh=function(u,t){UI_INPUT_CONTROL_CLASS.$refresh.call(this,u,t);q(UI_SELECT_CLASS,UI_ITEMS);UI_ITEMS.$initItems.call(this);this._uButton.$setSize(20,20)};UI_MULTI_SELECT_CLASS.selectAll=function(){for(var t=0,u=this.getItems(),v;v=u[t++];){!v._bSelectAllBtn&&v.setSelected(true)}};UI_MULTI_SELECT_CLASS.isSelectAll=function(){for(var t=0,u=this.getItems(),v;v=u[t++];){if(!v.isSelected()){return false}}return true}})();(function(){var t=ecui,n=t.ui,i=t.array,s=t.dom,a=t.string,c=t.util,p=t.inherits,g=t.$fastCreate,l=t.getOptions,h=t.getMouseX,e=t.triggerEvent,f=s.getStyle,m=s.create,v=s.moveElements,w=i.remove,r=c.toNumber,j=n.Control,q=j.prototype,b=n.TreeView,u=b.prototype,d=n.CustomTree=p(b,"ui-custom-tree",function(y,x){this._sValue=x.value||""},function(z,x){var y=this.getTypes()[0],A=m(y+"-item","","div");v(z,A,true);z.appendChild(A);this._bMultiSelect=x.multiSelect===true;this._aSelected=[];this._bEffectParent=x.effectParent===true;this._bRootSpecial=x.rootSpecial===true;return z}),k=d.prototype;k.$click=function(x){if(x.getControl()==this){q.$click.call(this,x);if(h(this)<=r(f(this.getBody(),"paddingLeft"))){this[x=this.isCollapsed()?"expand":"collapse"]();e(this,x)}else{if(this._bSelected){if(this.getRoot()==this){this.cancelSelect()}else{this.getParent()._bMultiSelect&&this.cancelSelect()}}else{this.select()}}}};k.select=function(){!this._bSelected&&this.selectSelf();this.selectParent();this.selectChildren()};k.selectSelf=function(){var z=this.getParent(),x=this.getRoot();this._bSelected=true;this.alterClass("+selected");this._bExpandSelected&&this.expand();if(x!=this){if(z._bMultiSelect){z._aSelected=[];for(var y=0,A;A=z._aChildren[y];y++){A._bSelected&&z._aSelected.push(A)}}else{z._aSelected[0]&&z._aSelected[0].cancelSelect();z._aSelected[0]=this}}};k.selectParent=function(){var y=this.getParent(),x=this.getRoot();if(this!=x&&this._bEffectParent){if(x!=y||!this._bRootSpecial){y.selectSelf();y.selectParent()}}};k.selectChildren=function(){var x=this.getRoot(),z=this.getParent();if(this._aChildren&&this._aChildren.length){if(this._bMultiSelect){for(var y=0,A;A=this._aChildren[y];y++){A.select()}}else{this._aChildren[0].select()}}};k.cancelSelect=function(){var z=this.getParent(),x=this.getRoot();if(x==this){}else{w(z._aSelected,this)}this._bSelected=false;this.alterClass("-selected");if(this._aChildren&&this._aChildren.length){for(var y=0,A;A=this._aChildren[y];y++){A._bSelected&&A.cancelSelect()}}if(x._bSelected){x._bSelected=false;x.alterClass("-selected")}};k.selectAll=function(){var x=this.getRoot();x.select()};k.getSelected=function(){var x=this.getRoot();var z=[];y(x);return z;function y(C){C._bSelected&&C._sValue&&z.push(C._sValue);if(C._aChildren&&C._aChildren.length){for(var A=0,B;B=C._aChildren[A];A++){y(B)}}}};k.setSelected=function(y){var x=this.getRoot();z(x);function z(C){for(var A=0,B;B=y[A];A++){if(B==C._sValue){C.selectSelf();C.selectParent()}}if(C._aChildren&&C._aChildren.length){for(var A=0,B;B=C._aChildren[A];A++){z(B)}}}};k.isRootSelected=function(){var x=this.getRoot();if(x._bSelected){return true}else{return false}}})();(function(){var z=ecui,E=z.ui,b=z.dom,d=z.array,n=z.string,h=z.util,i=z.$fastCreate,g=z.inherits,J=z.triggerEvent,u=b.children,k=b.first,s=b.last,H=b.getParent,K=b.create,L=b.insertBefore,j=b.insertAfter,D=b.setStyle,M=b.remove,y=b.addClass,I=b.getAttribute,q=b.removeClass,C=b.getPosition,r=b.moveElements,l=h.extend,m=h.blank,c=document,f=E.Control,v=f.prototype,G=E.Item,t=G.prototype,w=E.Items;var a=E.Toolbar=g(f,"ui-toolbar",function(Q,O){var P=this.getTypes()[0]},function(Q,X){var V=this.getTypes()[0];this._nMaxShow=X.maxShow||5;if(u(Q).length<this._nMaxShow+1){var P=K("","","span");r(Q,P,true);Q.appendChild(P);this.$setBody(P);this.$initItems();var U=this.getItems()}else{var P=K("","","span");r(Q,P,true);Q.appendChild(P);this.$setBody(P);var T=K(V+"-more-out","","div");var S=this._nMaxShow-1;var P=u(P);for(var R=S;R<P.length;R++){var O=K("","",P[R].tagName);O.innerHTML=P[R].innerHTML;O.setAttribute("ecui",I(P[R],"ecui"));T.appendChild(O)}Q.appendChild(T);this.$initItems();var U=this.getItems();this._MoreMenu=[];for(var R=S;R<P.length;R++){this._MoreMenu.push(U[R])}}this._nItems=this.getItems().length;for(var R=0;R<this._nItems;R++){var W=this.getItems()[R].getOuter();var P=K(V+"-text","","span");r(W,P,true);W.appendChild(P);if(u(Q)[1]||R<this._nItems-1){var P=K(V+"-space","","span");P.innerHTML="|";W.appendChild(P)}}if(u(Q)[1]){var P=K(V+"-more","","div");r(u(Q)[1],P,true);u(Q)[1].appendChild(P);this._uMore=i(this.More,P,this,{});F(this)}if(this.getItems()&&this.getItems().length){this.getItems()[0].$setSelected()}}),e=a.prototype;e.getValue=function(){return this._cSelected.getValue()};function F(S,Q){var P=S._uMore;var R;if(P.getSelected()){R=P.getSelected().getValue()}for(var O=0;O<S._MoreMenu.length;O++){var T=S._MoreMenu[O];if(R==T.getValue()){T.show();if(Q=="select"){T.$setSelected()}}else{T.hide()}}}var N=(e.More=g(f,"ui-toolbar-more",function(R,O){var Q=this.getTypes()[0];D(R,"z-index",32764);var S=K(Q+"-button","","span");S.innerHTML='<span style="vertical-align:middle">更多</span><span class="'+Q+'-img"></span>';L(S,R.firstChild);var S=K();R.appendChild(S);R=u(R);for(var P=1;P<R.length-1;P++){S.appendChild(R[P])}},function(Q,O){var P=this.getTypes()[0];y(s(Q),P+"-options");D(s(Q),"position","absolute");this._uOptions=i(this.Options,M(s(Q)),this,{});this.$setBody(this._uOptions.getBody());this.$initItems();this._cSelected=this.getItems()[0]})).prototype;N.getSelected=function(){return this._cSelected};var x=(N.Options=g(f,"ui-toolbar-more-options")).prototype;N.$mouseover=function(){v.$mouseover.call(this);B(this)};N.$mouseout=function(){v.$mouseout.call(this);this._uOptions.hide()};function B(R){var O=R._uOptions;var Q=O.getOuter();if(!H(Q)){c.body.appendChild(Q);R.cache(false,true)}v.show.call(O);for(var P=0;P<R.getItems().length;P++){var S=R.getItems()[P];if(R._cSelected==S){S.hide()}else{S.show()}}var T=C(R.getOuter());O.setPosition(T.left+R.getOuter().offsetWidth-Q.offsetWidth-1,T.top+R.getOuter().offsetHeight)}var p=(e.Item=g(G,"ui-toolbar-item",null,function(P,O){this._sValue=O.value===undefined?getText(P):""+O.value})).prototype;l(e,w);p.getValue=function(){return this._sValue};p.show=function(){J(this,"show");return true};p.hide=function(){J(this,"hide")};p.$setSelected=function(){var P=this.getParent();var O=this.getTypes()[0];if(P._cSelected){q(P._cSelected.getOuter(),O+"-selected")}y(this.getOuter(),O+"-selected");if(P._cSelected!=this){P._cSelected=this;J(P,"change")}J(P,"resize")};p.$click=function(){v.$click.call(this);this.$setSelected()};e.$alterItems=function(){};var A=(N.Item=g(G,null,null,function(P,O){this._sValue=O.value===undefined?getText(P):""+O.value})).prototype;l(N,w);A.getValue=function(){return this._sValue};A.$click=function(){var O=this.getParent();O._cSelected=this;F(O.getParent(),"select");J(O,"mouseout")}})();(function(){var y=ecui,t=y.ui,x=y.dom,a=y.util,k=y.$fastCreate,v=y.inherits,c=y.triggerEvent,q=x.create,h=x.children,f=x.setStyle,p=x.addClass,r=x.removeClass,z=a.extend,j=a.blank,n=Math,i=t.Control,w=i.prototype,s=t.Item,b=s.prototype,m=t.Items;var e=t.CustomPager=v(i,"ui-custom-pager",function(D,B){var C=this.getTypes()[0];f(D,"display","inline-block");D.innerHTML='<span class="'+C+'-pre" style="display:inline-block">&lt;</span><span class="'+C+'-items" style="display:inline-block"><span ecui="value:1">1</span><span ecui="value:2">2</span><span ecui="value:3">3</span></span><span class="'+C+'-next" style="display:inline-block">&gt;</span>'},function(C,B){this._nPage=B.page-0||1;this._nTotal=B.total-0||100;this._nPagesize=B.pagesize-0||10;this._nMaxShow=B.maxShow-0||3;C=h(C);this._uPre=k(this.Pre,C[0],this,{userSelect:false});this._uNext=k(this.Next,C[2],this,{userSelect:false});this.$setBody(C[1]);this.$initItems();u(this,this._nPage)});var A=e.prototype;A.getValue=function(){if(this._cSelected){return this._cSelected.$getValue()}else{return null}};A.render=function(D,C,B){this._nPage=D||1;this._nTotal=C||0;this._nPagesize=B||10;u(this,this._nPage)};A.Pre=v(i);var g=A.Pre.prototype;A.Next=v(i);var l=A.Next.prototype;g.$click=function(){var B=this.getParent();var C=B.getValue()-1;u(B,C)};l.$click=function(){var B=this.getParent();var C=B.getValue()+1;u(B,C)};function u(F,E){F._nTotalPage=n.ceil(F._nTotal/F._nPagesize);if(F._nTotalPage<F.getItems().length){for(var D=0;D<F._nMaxShow-F._nTotalPage;D++){var C=F.getItems();F.remove(C[C.length-1])}}if(F._nTotalPage<=1){F.hide();return}var C=F.getItems();var H=C[0].$getValue();var B=C[C.length-1].$getValue();if(E<=1){E=1;F._uPre.disable()}else{F._uPre.enable()}if(E>=F._nTotalPage){E=F._nTotalPage;F._uNext.disable()}else{F._uNext.enable()}if(E<H){H=E;B=E+C.length}else{if(E>B){B=E;H=B-C.length+1}}for(var D=0;D<C.length;D++){var G=C[D];G.$setValue(D+H);if(E==G.$getValue()){G.$setSelected()}}}A.Item=v(i,null,function(C,B){B.userSelect=false},function(C,B){this._nValue=B.value});var d=A.Item.prototype;z(A,m);A.$alterItems=j;d.$click=function(){var B=this.getParent();var C=this.$getValue();u(B,C)};d.$setSelected=function(){var B=this.getParent();if(B._nValue==this.$getValue()){return}else{if(B._cSelected){r(B._cSelected.getOuter(),"ui-custom-pager-item-selected")}p(this.getOuter(),"ui-custom-pager-item-selected");B._cSelected=this;B._nValue=this.$getValue();c(B,"change",null,[B.getValue()])}};d.$setValue=function(B){this._nValue=B;this._sName=B;this.setContent(this._sName)};d.$getValue=function(){return this._nValue}})();(function(){var s=ecui,g=s.array,r=s.dom,n=s.ui,e=Date,b=g.indexOf,l=r.addClass,i=r.getParent,m=r.removeClass,q=r.setText,f=s.$fastCreate,p=s.inherits,c=s.triggerEvent,j=n.Control;var h=n.MonthViewOnly=p(j,"ui-monthviewonly",function(w,t){var v=this.getType(),x=[];w.style.overflow="auto";for(var u=0;u<12;u++){x.push('<td class="'+v+"-item"+this.Cell.TYPES+'">'+h.MONTH[u]+"月</td>"+((u+1)%3?"":"</tr><tr>"))}w.innerHTML='<table cellspacing="0"><tbody><tr>'+x.join("")+"</tr></tbody></table>"},function(w,u){this._aCells=[];for(var v=0,x=w.getElementsByTagName("TD"),y;y=x[v];){var t=f(this.Cell,y,this,{resizable:false});t._nMonth=v+1;this._aCells[v++]=t}this._nMonth=u.month||1;this._nYear=u.year||(new Date()).getFullYear();this.setView(this._nYear,this._nMonth)}),k=h.prototype,d=(k.Cell=p(j)).prototype;h.MONTH=["一","二","三","四","五","六","七","八","九","十","十一","十二"];function a(t,u){if(t._uSelected==u){return}if(t._uSelected){t._uSelected.alterClass("-selected")}if(u){u.alterClass("+selected")}t._uSelected=u}d.$click=function(u){var t=this.getParent();var v=t._nMonth;if(v!=this._nMonth){t._nMonth=this._nMonth;c(t,"change",u,[this._nMonth]);a(t,this)}};k.getMonth=function(){return this._nMonth};k.getYear=function(){return this._nYear};k.move=function(t){this.setView(this._nYear,this._nMonth+t)};k.clear=function(){this._uSelected=null;for(var t=0,u;u=this._aCells[t++];){u.alterClass("-selected")}};k.setView=function(t,u){this._nYear=t;this._nMonth=u;a(this,this._aCells[u-1])}})();(function(){var A=ecui,g=A.array,b=A.dom,J=A.ui,q=A.string,l=A.util,p=Date,a=RegExp,f=document,I=g.push,u=b.children,Q=b.create,O=b.getParent,H=b.getPosition,t=b.moveElements,c=b.setText,L=q.formatDate,D=l.getView,n=A.$fastCreate,j=A.inherits,P=A.triggerEvent,d=A.setFocused,i=J.Control,w=i.prototype,e=J.Button,z=e.prototype,G=J.InputControl,C=G.prototype,E=J.Select,B=2002,h=(new Date()).getFullYear(),R=J.MonthViewOnly,m=R.Cell;var M=J.MonthCalendar=j(G,"ui-month-calendar",function(U,S){var T=this.getTypes()[0];S.hidden=true;U.innerHTML='<span class="'+T+'-text"></span><span class="'+T+'-cancel"></span><span class="'+T+'-button"></span>'},function(U,S){var W=u(U),T=this.getTypes()[0],V=Q(T+"-panel","position:absolute;display:none");this._bTip=S.tip!==false;this._nYear=S.year;this._nMonth=S.month;this._eText=W[0];this._uCancel=n(this.Cancel,W[1],this);this._uButton=n(i,W[2],this);f.body.appendChild(V);this._uPanel=n(this.Panel,V,this,S);if(S.hideCancel==true){this._bHideCancel=true;this._uCancel.$hide()}}),K=M.prototype,r=(K.Cancel=j(i)).prototype,N=K.Panel=j(i,"ui-month-calendar-panel",function(X,S){var U=[],W=(new p()).getFullYear(),Y=S.beginYear||B,Z=S.endYear||h,V=this.getTypes()[0];U.push('<div class="'+V+'-buttons"><div class="'+V+"-btn-prv"+e.TYPES+'"></div><select class="'+V+"-slt-year"+E.TYPES+'">');for(var T=Y;T<Z+1;T++){U.push('<option value="'+T+'">'+T+"</option>")}U.push("</select>");U.push('<div class="'+V+"-btn-nxt"+e.TYPES+'"></div></div>');U.push('<div class="'+V+"-month-view"+R.TYPES+'"></div>');X.innerHTML=U.join("")},function(T,ac){var X=[],S,V,Y=this.getTypes()[0],aa=this.Button,W=this.Select,Z=ac.beginYear||B,ab=ac.endYear||h,U=this.MonthViewOnly;T=u(T);S=u(T[0]);this._beginYear=Z;this._endYear=ab;this._uPrvBtn=n(aa,S[0],this);this._uPrvBtn._nStep=-1;this._uYearSlt=n(W,S[1],this);this._uNxtBtn=n(aa,S[2],this);this._uNxtBtn._nStep=1;T=T[1];this._uMonthView=n(U,T,this);this._uYearSlt.setValue((new Date()).getFullYear())}),x=N.prototype,k=(x.Button=j(e,null)).prototype,v=(x.Select=j(E,null)).prototype,y=(x.MonthViewOnly=j(R,null)).prototype,F='<span class="ui-calendar-default">请选择一个日期</span>';function s(S){var T=S._eText;if(T.innerHTML==""){S._uCancel.hide();if(S._bTip){T.innerHTML=F}}else{if(!S._bHideCancel){S._uCancel.show()}}}K.getYear=function(){return this._nYear};K.getMonth=function(){return this._nMonth};K.setDate=function(T,U){var S=T&&U?T+"年"+(U>9?U:"0"+U)+"月":"";if(this._uPanel.isShow()){this._uPanel.hide()}this._eText.innerHTML=S;this.setValue(S);this._nYear=T;this._nMonth=U;s(this)};K.$activate=function(V){var T=this._uPanel,S,W=H(this.getOuter()),U=W.top+this.getHeight();C.$activate.call(this,V);if(!T.isShow()){T.setDate(this._nYear,this._nMonth);S=D();T.show();T.setPosition(W.left+T.getWidth()<=S.right?W.left:S.right-T.getWidth()>0?S.right-T.getWidth():0,U+T.getHeight()<=S.bottom?U:W.top-T.getHeight()>0?W.top-T.getHeight():0);d(T)}};K.$cache=function(S,T){C.$cache.call(this,S,T);this._uButton.cache(false,true);this._uPanel.cache(true,true)};K.init=function(){C.init.call(this);this.setDate(this._nYear,this._nMonth);this._uPanel.init()};K.clear=function(){this.setDate()};r.$click=function(){var S=this.getParent();w.$click.call(this);S.clear()};r.$activate=z.$activate;x.$blur=function(){this.hide()};x.setDate=function(T,U){var S=new Date();T=T||S.getFullYear();this._uYearSlt.setValue(T);this._uMonthView.setView(T,U);this.setView(T,U)};x.setView=function(S,U){var T=this._uYearSlt,V=this._uMonthView;S=S||(new Date()).getFullYear();T.setValue(S);S&&V.setView(S,U)};x.getViewYear=function(){return this._uMonthView.getYear()};x.getViewMonth=function(){return this._uMonthView.getMonth()};x.$cache=function(S,T){this._uPrvBtn.cache(true,true);this._uNxtBtn.cache(true,true);this._uYearSlt.cache(true,true);this._uMonthView.cache(true,true);w.$cache.call(this,S,T)};x.init=function(){w.init.call(this);this._uYearSlt.init();this._uMonthView.init()};x.$change=function(U,V){var T=this.getParent();var S=this._uYearSlt.getValue();if(P(T,"change",U,[S,V])){T.setDate(S,V)}this.hide()};v.$change=function(){var T=this.getParent(),S=T.getParent(),V=T._uYearSlt;var U=S._nYear==V.getValue()?S._nMonth:null;T.setView(V.getValue(),U)};k.$click=function(){var W=this._nStep,T=this.getParent(),S=T.getParent(),U;var V=T._uYearSlt.getValue();var X=V-0+W;if(X<T._beginYear){X=T._endYear}if(X>T._endYear){X=T._beginYear}T._uMonthView.clear();if(X==S._nYear){T._uMonthView.setView(X,T.getViewMonth())}T._uYearSlt.setValue(X)};y.$change=function(S,T){P(this.getParent(),"change",S,[T])}})();